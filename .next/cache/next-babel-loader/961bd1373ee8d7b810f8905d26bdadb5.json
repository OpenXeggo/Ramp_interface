{"ast":null,"code":"var _jsxFileName = \"/home/ankit/xeggo/put/Ramp_interface/components/BuyWidget.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useReducer, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { parseEther } from \"@ethersproject/units\";\nimport Account from \"./Account\";\nimport useContract from \"../hooks/useContract\";\nimport useEagerConnect from \"../hooks/useEagerConnect\";\nimport { constants } from \"../util\";\nimport Comptroller from \"../abi/Comptroller.json\";\n\nconst fetcher = (...args) => fetch(args[0], args[1]).then(res => res.json());\n\nconst defaultFormData = {\n  paymentid: \"\",\n  amount: \"\",\n  fiat: \"\",\n  escrow: \"\"\n};\n\nconst formReducer = (state, event) => {\n  if (event.reset) {\n    return defaultFormData;\n  }\n\n  return _objectSpread(_objectSpread({}, state), {}, {\n    [event.name]: event.value\n  });\n};\n\nexport default function Buy() {\n  const {\n    0: formData,\n    1: setFormData\n  } = useReducer(formReducer, defaultFormData);\n  const {\n    0: submitting,\n    1: setSubmitting\n  } = useState(false);\n  const {\n    0: reverted,\n    1: setReverted\n  } = useState(false);\n  const triedToEagerConnect = useEagerConnect();\n  const comptroller = useContract(constants.COMPTROLLER_ADDRESS, Comptroller, true);\n  const {\n    library,\n    account\n  } = useWeb3React();\n  const isConnected = typeof account === \"string\" && !!library;\n  const {\n    data,\n    error\n  } = useSWR('/api/prices', fetcher, {\n    refreshInterval: 5000\n  });\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setSubmitting(true);\n    setReverted(false);\n    await comptroller.requestFiatPayment(formData.escrow || constants.ESCROW_ADDRESS, account, parseEther(formData.amount), formData.paymentid).then(res => {\n      setFormData({\n        reset: true\n      });\n    }).catch(e => {\n      if (e.code == -32016) setReverted(true);\n      console.error(e);\n    }).finally(() => setSubmitting(false));\n  };\n\n  const handleChange = event => {\n    setFormData({\n      name: event.target.name,\n      value: event.target.value\n    });\n  };\n\n  const calFiatAmount = res => {\n    if (!res) return;\n    if (!formData.amount) return \"\";\n    const price = res.ethinr.last;\n    return (formData.amount * price).toString();\n  };\n\n  return __jsx(\"form\", {\n    className: \"bg-white shadow-md rounded-lg px-8 pt-6 pb-8 mb-4\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-xs mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"Buy\"), __jsx(\"input\", {\n    className: \"w-auto appearance-none border-2 border-gray-200 rounded py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\",\n    name: \"amount\",\n    disabled: submitting,\n    inputMode: \"decimal\",\n    type: \"text\",\n    pattern: \"^[0-9]*[.,]?[0-9]*$\",\n    autoComplete: \"off\",\n    autoCorrect: \"off\",\n    minLength: 1,\n    maxLength: 79,\n    spellCheck: \"false\",\n    placeholder: \"0.0\",\n    onChange: handleChange,\n    value: formData.amount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: \"w-auto inline-block p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, \"ETH\")), __jsx(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-xs mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, \"For (estimated)\"), __jsx(\"input\", {\n    className: \"w-auto appearance-none border-2 border-gray-200 rounded py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\",\n    name: \"fiat\",\n    disabled: submitting,\n    inputMode: \"decimal\",\n    type: \"text\",\n    pattern: \"^[0-9]*[.,]?[0-9]*$\",\n    autoComplete: \"off\",\n    autoCorrect: \"off\",\n    minLength: 1,\n    maxLength: 79,\n    spellCheck: \"false\",\n    placeholder: \"0.0\",\n    onChange: handleChange,\n    value: calFiatAmount(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: \"w-auto inline-block p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, \"INR\")), __jsx(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-xs mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, \"UPI ID\"), __jsx(\"input\", {\n    className: \"appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\",\n    name: \"paymentid\",\n    disabled: submitting,\n    type: \"text\",\n    minLength: 1,\n    maxLength: 79,\n    placeholder: \"unique_Id\",\n    onChange: handleChange,\n    value: formData.paymentid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-xs mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, \"Escrow address (optional)\"), __jsx(\"input\", {\n    className: \"appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\",\n    name: \"escrow\",\n    disabled: submitting,\n    type: \"text\",\n    minLength: 1,\n    maxLength: 79,\n    placeholder: constants.ESCROW_ADDRESS,\n    onChange: handleChange,\n    value: formData.escrow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  })), reverted && // or link\n  __jsx(\"div\", {\n    className: \"w-full flex pt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, \"Not enough funds in escrow...\"), __jsx(\"div\", {\n    className: \"w-full flex pt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, isConnected ? __jsx(\"button\", {\n    type: \"submit\",\n    disabled: submitting,\n    className: \"btn-blue m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, \"Pay\") : __jsx(\"div\", {\n    className: \"m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, __jsx(Account, {\n    triedToEagerConnect: triedToEagerConnect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/ankit/xeggo/put/Ramp_interface/components/BuyWidget.tsx"],"names":["React","useReducer","useState","useSWR","useWeb3React","parseEther","Account","useContract","useEagerConnect","constants","Comptroller","fetcher","args","fetch","then","res","json","defaultFormData","paymentid","amount","fiat","escrow","formReducer","state","event","reset","name","value","Buy","formData","setFormData","submitting","setSubmitting","reverted","setReverted","triedToEagerConnect","comptroller","COMPTROLLER_ADDRESS","library","account","isConnected","data","error","refreshInterval","handleSubmit","preventDefault","requestFiatPayment","ESCROW_ADDRESS","catch","e","code","console","finally","handleChange","target","calFiatAmount","price","ethinr","last","toString"],"mappings":"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","sourcesContent":["import React, { useReducer, useState } from \"react\";\nimport Link from \"next/link\";\nimport useSWR from \"swr\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { parseEther } from \"@ethersproject/units\";\n\nimport Account from \"./Account\";\nimport useContract from \"../hooks/useContract\";\nimport useEagerConnect from \"../hooks/useEagerConnect\";\nimport { constants } from \"../util\";\n\nimport Comptroller from \"../abi/Comptroller.json\";\n\nconst fetcher = (...args) => fetch(args[0], args[1]).then(res => res.json());\nconst defaultFormData = {\n  paymentid: \"\",\n  amount: \"\",\n  fiat: \"\",\n  escrow: \"\",\n};\n\nconst formReducer = (state, event) => {\n  if (event.reset) {\n    return defaultFormData;\n  }\n\n  return {\n    ...state,\n    [event.name]: event.value,\n  };\n};\n\nexport default function Buy() {\n  const [formData, setFormData] = useReducer(formReducer, defaultFormData);\n  const [submitting, setSubmitting] = useState(false);\n  const [reverted, setReverted] = useState(false);\n  const triedToEagerConnect = useEagerConnect();\n  const comptroller = useContract(\n    constants.COMPTROLLER_ADDRESS,\n    Comptroller,\n    true,\n  );\n  const { library, account } = useWeb3React();\n  const isConnected = typeof account === \"string\" && !!library;\n  const { data, error } = useSWR('/api/prices', fetcher, { refreshInterval: 5000 });\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setSubmitting(true);\n    setReverted(false);\n\n    await comptroller\n      .requestFiatPayment(\n        formData.escrow || constants.ESCROW_ADDRESS,\n        account,\n        parseEther(formData.amount),\n        formData.paymentid,\n      )\n      .then((res) => {\n        setFormData({\n          reset: true,\n        });\n      })\n      .catch((e) => {\n        if (e.code == -32016)\n          setReverted(true);\n        console.error(e)\n      })\n      .finally(() => setSubmitting(false));\n  };\n\n  const handleChange = (event) => {\n    setFormData({\n      name: event.target.name,\n      value: event.target.value,\n    });\n  };\n\n  const calFiatAmount = (res) => {\n    if (!res) return;\n    if (!formData.amount) return \"\";\n    const price = res.ethinr.last;\n    return (formData.amount * price).toString();\n  }\n\n  return (\n    <form\n      className=\"bg-white shadow-md rounded-lg px-8 pt-6 pb-8 mb-4\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"mb-4\">\n        <label className=\"block text-gray-700 text-xs mb-2\">Buy</label>\n        <input\n          className=\"w-auto appearance-none border-2 border-gray-200 rounded py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\"\n          name=\"amount\"\n          disabled={submitting}\n          inputMode=\"decimal\"\n          type=\"text\"\n          pattern=\"^[0-9]*[.,]?[0-9]*$\"\n          autoComplete=\"off\"\n          autoCorrect=\"off\"\n          minLength={1}\n          maxLength={79}\n          spellCheck=\"false\"\n          placeholder=\"0.0\"\n          onChange={handleChange}\n          value={formData.amount}\n        />\n        <div className=\"w-auto inline-block p-2\">ETH</div>\n      </div>\n\n      <div className=\"mb-4\">\n        <label className=\"block text-gray-700 text-xs mb-2\">For (estimated)</label>\n        <input\n          className=\"w-auto appearance-none border-2 border-gray-200 rounded py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\"\n          name=\"fiat\"\n          disabled={submitting}\n          inputMode=\"decimal\"\n          type=\"text\"\n          pattern=\"^[0-9]*[.,]?[0-9]*$\"\n          autoComplete=\"off\"\n          autoCorrect=\"off\"\n          minLength={1}\n          maxLength={79}\n          spellCheck=\"false\"\n          placeholder=\"0.0\"\n          onChange={handleChange}\n          value={calFiatAmount(data)}\n        />\n        <div className=\"w-auto inline-block p-2\">INR</div>\n      </div>\n\n      <div className=\"mb-4\">\n        <label className=\"block text-gray-700 text-xs mb-2\">UPI ID</label>\n        <input\n          className=\"appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\"\n          name=\"paymentid\"\n          disabled={submitting}\n          type=\"text\"\n          minLength={1}\n          maxLength={79}\n          placeholder=\"unique_Id\"\n          onChange={handleChange}\n          value={formData.paymentid}\n        />\n      </div>\n\n      <div className=\"mb-4\">\n        <label className=\"block text-gray-700 text-xs mb-2\">Escrow address (optional)</label>\n        <input\n          className=\"appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:border-purple-500\"\n          name=\"escrow\"\n          disabled={submitting}\n          type=\"text\"\n          minLength={1}\n          maxLength={79}\n          placeholder={constants.ESCROW_ADDRESS}\n          onChange={handleChange}\n          value={formData.escrow}\n        />\n      </div>\n\n        {reverted && (\n          // or link\n          <div className=\"w-full flex pt-4\">\n            Not enough funds in escrow...\n          </div>\n        )}\n\n      <div className=\"w-full flex pt-4\">\n        {isConnected ? (\n          <button\n            type=\"submit\"\n            disabled={submitting}\n            className=\"btn-blue m-auto\">\n            Pay\n          </button>\n        ) : (\n          <div className=\"m-auto\">\n            <Account triedToEagerConnect={triedToEagerConnect}/>\n          </div>\n        )}\n      </div>\n    </form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}