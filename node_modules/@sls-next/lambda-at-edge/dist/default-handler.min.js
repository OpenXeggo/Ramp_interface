"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./prerender-manifest.json"),t=require("./manifest.json"),r=require("./routes-manifest.json"),n=require("stream"),i=require("zlib"),o=require("http"),a=require("perf_hooks"),s=require("buffer"),u=require("util"),c=require("crypto"),f=require("url"),l=require("fs"),d=require("os"),p=require("path"),h=require("child_process"),v=require("https");require("http2");var g=require("process");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var y=m(e),S=m(t),w=m(r),b=m(n),E=m(i),x=m(o),A=m(s),C=m(u),L=m(c),T=m(g);const k={"accept-encoding":!0,"content-length":!0,"if-modified-since":!0,"if-none-match":!0,"if-range":!0,"if-unmodified-since":!0,"transfer-encoding":!0,via:!0},O={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy"},R={enableHTTPCompression:!1},N=(e,{enableHTTPCompression:t}=R)=>{const{request:r,response:n={headers:{}}}=e,i={headers:{}},o=new b.default.Readable,a=Object.assign(o,x.default.IncomingMessage.prototype);a.url=r.uri,a.method=r.method,a.rawHeaders=[],a.headers={},a.connection={},r.querystring&&(a.url=a.url+"?"+r.querystring);const s=r.headers||{};for(const e of Object.keys(s)){const t=s[e];t.forEach((e=>{a.rawHeaders.push(e.key),a.rawHeaders.push(e.value)})),a.headers[e]=t[0].value}a.getHeader=e=>a.headers[e.toLowerCase()],a.getHeaders=()=>a.headers,r.body&&r.body.data&&a.push(r.body.data,r.body.encoding?"base64":void 0),a.push(null);const u=new b.default;u.finished=!1,Object.defineProperty(u,"statusCode",{get:()=>i.status,set(e){i.status=e,i.statusDescription=O[e]}}),u.headers={},u.writeHead=(e,t)=>(i.status=e,t&&(u.headers=Object.assign(u.headers,t)),u),u.write=e=>{i.body||(i.body=Buffer.from("")),i.body=Buffer.concat([i.body,Buffer.isBuffer(e)?e:Buffer.from(e)])};let c=t&&(e=>{let t=!1;const r=e["accept-encoding"];if(r)for(let e=0;e<r.length;e++){const{value:n}=r[e];-1!==n.split(",").map((e=>e.split(";")[0].trim())).indexOf("gzip")&&(t=!0)}return t})(s);const f=new Promise((e=>{u.end=t=>{!0!==u.finished&&(u.finished=!0,t&&u.write(t),u.statusCode||(u.statusCode=200),i.body&&(i.bodyEncoding="base64",i.body=c?E.default.gzipSync(i.body).toString("base64"):Buffer.from(i.body).toString("base64")),i.headers=((e,t)=>{const r={},n={};return Object.entries(t).forEach((([e,t])=>{n[e.toLowerCase()]=t})),Object.keys(e).forEach((t=>{const i=t.toLowerCase(),o=e[t];k[i]?n[i]&&(r[i]=n[i]):(r[i]=[],o instanceof Array?o.forEach((e=>{r[i].push({key:t,value:e.toString()})})):r[i].push({key:t,value:o.toString()}))})),r})(u.headers,n.headers),c&&(i.headers["content-encoding"]=[{key:"Content-Encoding",value:"gzip"}]),e(i))}}));return u.setHeader=(e,t)=>{u.headers[e.toLowerCase()]=t},u.removeHeader=e=>{delete u.headers[e.toLowerCase()]},u.getHeader=e=>u.headers[e.toLowerCase()],u.getHeaders=()=>u.headers,u.hasHeader=e=>!!u.getHeader(e),{req:a,res:u,responsePromise:f}};N.SPECIAL_NODE_HEADERS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];var P=N,_=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(D),o=n.decode||I,a=0;a<i.length;a++){var s=i[a],u=s.indexOf("=");if(!(u<0)){var c=s.substr(0,u).trim(),f=s.substr(++u,s.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==r[c]&&(r[c]=K(f,o))}}return r},j=function(e,t,r){var n=r||{},i=n.encode||M;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!z.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!z.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=n.maxAge){var s=n.maxAge-0;if(isNaN(s)||!isFinite(s))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(s)}if(n.domain){if(!z.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!z.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(a+="; HttpOnly");n.secure&&(a+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},I=decodeURIComponent,M=encodeURIComponent,D=/; */,z=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function K(e,t){try{return t(e)}catch(t){return e}}var U={parse:_,serialize:j};function q(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var B=q((function(e,t){var r=A.default.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=A.default:(n(A.default,t),t.Buffer=i),i.prototype=Object.create(r.prototype),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return A.default.SlowBuffer(e)}})),F=B.Buffer;function H(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=F.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=F.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}C.default.inherits(H,b.default),H.prototype.write=function(e){this.buffer=F.concat([this.buffer,F.from(e)]),this.emit("data",e)},H.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};var $=H,V=A.default.Buffer,W=A.default.SlowBuffer,G=J;function J(e,t){if(!V.isBuffer(e)||!V.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}J.install=function(){V.prototype.equal=W.prototype.equal=function(e){return J(this,e)}};var X=V.prototype.equal,Z=W.prototype.equal;function Y(e){return(e/8|0)+(e%8==0?0:1)}J.restore=function(){V.prototype.equal=X,W.prototype.equal=Z};var Q={ES256:Y(256),ES384:Y(384),ES512:Y(521)};var ee=function(e){var t=Q[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')},te=B.Buffer;function re(e){if(te.isBuffer(e))return e;if("string"==typeof e)return te.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function ne(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}var ie={derToJose:function(e,t){e=re(e);var r=ee(t),n=r+1,i=e.length,o=0;if(48!==e[o++])throw new Error('Could not find expected "seq"');var a=e[o++];if(129===a&&(a=e[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(2!==e[o++])throw new Error('Could not find expected "int" for "r"');var s=e[o++];if(i-o-2<s)throw new Error('"r" specified length of "'+s+'", only "'+(i-o-2)+'" available');if(n<s)throw new Error('"r" specified length of "'+s+'", max of "'+n+'" is acceptable');var u=o;if(o+=s,2!==e[o++])throw new Error('Could not find expected "int" for "s"');var c=e[o++];if(i-o!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(i-o)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var f=o;if((o+=c)!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var l=r-s,d=r-c,p=te.allocUnsafe(l+s+d+c);for(o=0;o<l;++o)p[o]=0;e.copy(p,o,u+Math.max(-l,0),u+s);for(var h=o=r;o<h+d;++o)p[o]=0;return e.copy(p,o,f+Math.max(-d,0),f+c),p=(p=p.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=re(e);var r=ee(t),n=e.length;if(n!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+n+'"');var i=ne(e,0,r),o=ne(e,r,e.length),a=r-i,s=r-o,u=2+a+1+1+s,c=u<128,f=te.allocUnsafe((c?2:3)+u),l=0;return f[l++]=48,c?f[l++]=u:(f[l++]=129,f[l++]=255&u),f[l++]=2,f[l++]=a,i<0?(f[l++]=0,l+=e.copy(f,l,0,r)):l+=e.copy(f,l,i,r),f[l++]=2,f[l++]=s,o<0?(f[l++]=0,e.copy(f,l,r)):e.copy(f,l,r+o),f}},oe=B.Buffer,ae="secret must be a string or buffer",se="key must be a string or a buffer",ue="function"==typeof L.default.createPublicKey;function ce(e){if(!oe.isBuffer(e)&&"string"!=typeof e){if(!ue)throw pe(se);if("object"!=typeof e)throw pe(se);if("string"!=typeof e.type)throw pe(se);if("string"!=typeof e.asymmetricKeyType)throw pe(se);if("function"!=typeof e.export)throw pe(se)}}function fe(e){if(!oe.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw pe("key must be a string, a buffer or an object")}function le(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function de(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function pe(e){var t=[].slice.call(arguments,1),r=C.default.format.bind(C.default,e).apply(null,t);return new TypeError(r)}function he(e){var t;return t=e,oe.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function ve(e){return function(t,r){!function(e){if(!oe.isBuffer(e)){if("string"==typeof e)return e;if(!ue)throw pe(ae);if("object"!=typeof e)throw pe(ae);if("secret"!==e.type)throw pe(ae);if("function"!=typeof e.export)throw pe(ae)}}(r),t=he(t);var n=L.default.createHmac("sha"+e,r);return le((n.update(t),n.digest("base64")))}}function ge(e){return function(t,r,n){var i=ve(e)(t,n);return G(oe.from(r),oe.from(i))}}function me(e){return function(t,r){fe(r),t=he(t);var n=L.default.createSign("RSA-SHA"+e);return le((n.update(t),n.sign(r,"base64")))}}function ye(e){return function(t,r,n){ce(n),t=he(t),r=de(r);var i=L.default.createVerify("RSA-SHA"+e);return i.update(t),i.verify(n,r,"base64")}}function Se(e){return function(t,r){fe(r),t=he(t);var n=L.default.createSign("RSA-SHA"+e);return le((n.update(t),n.sign({key:r,padding:L.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:L.default.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function we(e){return function(t,r,n){ce(n),t=he(t),r=de(r);var i=L.default.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:n,padding:L.default.constants.RSA_PKCS1_PSS_PADDING,saltLength:L.default.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function be(e){var t=me(e);return function(){var r=t.apply(null,arguments);return r=ie.derToJose(r,"ES"+e)}}function Ee(e){var t=ye(e);return function(r,n,i){return n=ie.joseToDer(n,"ES"+e).toString("base64"),t(r,n,i)}}function xe(){return function(){return""}}function Ae(){return function(e,t){return""===t}}ue&&(se+=" or a KeyObject",ae+="or a KeyObject");var Ce=function(e){var t={hs:ve,rs:me,ps:Se,es:be,none:xe},r={hs:ge,rs:ye,ps:we,es:Ee,none:Ae},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw pe('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:t[i](o),verify:r[i](o)}},Le=A.default.Buffer,Te=function(e){return"string"==typeof e?e:"number"==typeof e||Le.isBuffer(e)?e.toString():JSON.stringify(e)},ke=B.Buffer;function Oe(e,t){return ke.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Re(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,i=e.encoding,o=Ce(t.alg),a=function(e,t,r){r=r||"utf8";var n=Oe(Te(e),"binary"),i=Oe(Te(t),r);return C.default.format("%s.%s",n,i)}(t,r,i),s=o.sign(a,n);return C.default.format("%s.%s",a,s)}function Ne(e){var t=e.secret||e.privateKey||e.key,r=new $(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new $(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}C.default.inherits(Ne,b.default),Ne.prototype.sign=function(){try{var e=Re({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},Ne.sign=Re;var Pe=Ne,_e=B.Buffer,je=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Ie(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function Me(e){var t=e.split(".",1)[0];return Ie(_e.from(t,"base64").toString("binary"))}function De(e){return e.split(".")[2]}function ze(e){return je.test(e)&&!!Me(e)}function Ke(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=De(e=Te(e)),o=function(e){return e.split(".",2).join(".")}(e);return Ce(t).verify(o,i,r)}function Ue(e,t){if(t=t||{},!ze(e=Te(e)))return null;var r=Me(e);if(!r)return null;var n=function(e,t){t=t||"utf8";var r=e.split(".")[1];return _e.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(n=JSON.parse(n,t.encoding)),{header:r,payload:n,signature:De(e)}}function qe(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new $(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new $(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}C.default.inherits(qe,b.default),qe.prototype.verify=function(){try{var e=Ke(this.signature.buffer,this.algorithm,this.key.buffer),t=Ue(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},qe.decode=Ue,qe.isValid=ze,qe.verify=Ke;var Be=qe,Fe={ALGORITHMS:["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],sign:Pe.sign,verify:Be.verify,decode:Be.decode,isValid:Be.isValid,createSign:function(e){return new Pe(e)},createVerify:function(e){return new Be(e)}},He=function(e,t){t=t||{};var r=Fe.decode(e,t);if(!r)return null;var n=r.payload;if("string"==typeof n)try{var i=JSON.parse(n);null!==i&&"object"==typeof i&&(n=i)}catch(e){}return!0===t.complete?{header:r.header,payload:n,signature:r.signature}:n},$e=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};($e.prototype=Object.create(Error.prototype)).constructor=$e;var Ve=$e,We=function(e,t){Ve.call(this,e),this.name="NotBeforeError",this.date=t};(We.prototype=Object.create(Ve.prototype)).constructor=We;var Ge=We,Je=function(e,t){Ve.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(Je.prototype=Object.create(Ve.prototype)).constructor=Je;var Xe=Je,Ze=1e3,Ye=60*Ze,Qe=60*Ye,et=24*Qe,tt=7*et,rt=365.25*et,nt=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*rt;case"weeks":case"week":case"w":return r*tt;case"days":case"day":case"d":return r*et;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qe;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ye;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ze;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=et)return it(e,t,et,"day");if(t>=Qe)return it(e,t,Qe,"hour");if(t>=Ye)return it(e,t,Ye,"minute");if(t>=Ze)return it(e,t,Ze,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=et)return Math.round(e/et)+"d";if(t>=Qe)return Math.round(e/Qe)+"h";if(t>=Ye)return Math.round(e/Ye)+"m";if(t>=Ze)return Math.round(e/Ze)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function it(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var ot=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var n=nt(e);if(void 0===n)return;return Math.floor(r+n/1e3)}return"number"==typeof e?r+e:void 0},at=q((function(e,t){var r;t=e.exports=V,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],a=0,s=a++;o[s]="0|[1-9]\\d*";var u=a++;o[u]="[0-9]+";var c=a++;o[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=a++;o[f]="("+o[s]+")\\.("+o[s]+")\\.("+o[s]+")";var l=a++;o[l]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var d=a++;o[d]="(?:"+o[s]+"|"+o[c]+")";var p=a++;o[p]="(?:"+o[u]+"|"+o[c]+")";var h=a++;o[h]="(?:-("+o[d]+"(?:\\."+o[d]+")*))";var v=a++;o[v]="(?:-?("+o[p]+"(?:\\."+o[p]+")*))";var g=a++;o[g]="[0-9A-Za-z-]+";var m=a++;o[m]="(?:\\+("+o[g]+"(?:\\."+o[g]+")*))";var y=a++,S="v?"+o[f]+o[h]+"?"+o[m]+"?";o[y]="^"+S+"$";var w="[v=\\s]*"+o[l]+o[v]+"?"+o[m]+"?",b=a++;o[b]="^"+w+"$";var E=a++;o[E]="((?:<|>)?=?)";var x=a++;o[x]=o[u]+"|x|X|\\*";var A=a++;o[A]=o[s]+"|x|X|\\*";var C=a++;o[C]="[v=\\s]*("+o[A]+")(?:\\.("+o[A]+")(?:\\.("+o[A]+")(?:"+o[h]+")?"+o[m]+"?)?)?";var L=a++;o[L]="[v=\\s]*("+o[x]+")(?:\\.("+o[x]+")(?:\\.("+o[x]+")(?:"+o[v]+")?"+o[m]+"?)?)?";var T=a++;o[T]="^"+o[E]+"\\s*"+o[C]+"$";var k=a++;o[k]="^"+o[E]+"\\s*"+o[L]+"$";var O=a++;o[O]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var R=a++;o[R]="(?:~>?)";var N=a++;o[N]="(\\s*)"+o[R]+"\\s+",i[N]=new RegExp(o[N],"g");var P=a++;o[P]="^"+o[R]+o[C]+"$";var _=a++;o[_]="^"+o[R]+o[L]+"$";var j=a++;o[j]="(?:\\^)";var I=a++;o[I]="(\\s*)"+o[j]+"\\s+",i[I]=new RegExp(o[I],"g");var M=a++;o[M]="^"+o[j]+o[C]+"$";var D=a++;o[D]="^"+o[j]+o[L]+"$";var z=a++;o[z]="^"+o[E]+"\\s*("+w+")$|^$";var K=a++;o[K]="^"+o[E]+"\\s*("+S+")$|^$";var U=a++;o[U]="(\\s*)"+o[E]+"\\s*("+w+"|"+o[C]+")",i[U]=new RegExp(o[U],"g");var q=a++;o[q]="^\\s*("+o[C]+")\\s+-\\s+("+o[C]+")\\s*$";var B=a++;o[B]="^\\s*("+o[L]+")\\s+-\\s+("+o[L]+")\\s*$";var F=a++;o[F]="(<|>)?=?\\s*\\*";for(var H=0;H<35;H++)r(H,o[H]),i[H]||(i[H]=new RegExp(o[H]));function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[b]:i[y]).test(e))return null;try{return new V(e,t)}catch(e){return null}}function V(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof V){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof V))return new V(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[b]:i[y]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=$,t.valid=function(e,t){var r=$(e,t);return r?r.version:null},t.clean=function(e,t){var r=$(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=V,V.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},V.prototype.toString=function(){return this.version},V.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof V||(e=new V(e,this.options)),this.compareMain(e)||this.comparePre(e)},V.prototype.compareMain=function(e){return e instanceof V||(e=new V(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},V.prototype.comparePre=function(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return G(n,i)}while(++t)},V.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new V(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Y(e,t))return null;var r=$(e),n=$(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return i+a;return o},t.compareIdentifiers=G;var W=/^[0-9]+$/;function G(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new V(e,r).compare(new V(t,r))}function X(e,t,r){return J(e,t,r)>0}function Z(e,t,r){return J(e,t,r)<0}function Y(e,t,r){return 0===J(e,t,r)}function Q(e,t,r){return 0!==J(e,t,r)}function ee(e,t,r){return J(e,t,r)>=0}function te(e,t,r){return J(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Y(e,r,n);case"!=":return Q(e,r,n);case">":return X(e,r,n);case">=":return ee(e,r,n);case"<":return Z(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new V(e,t).major},t.minor=function(e,t){return new V(e,t).minor},t.patch=function(e,t){return new V(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,r){return J(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=X,t.lt=Z,t.eq=Y,t.neq=Q,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var ie={};function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof ne)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function se(e,t,r,n,i,o,a,s,u,c,f,l,d){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(i)?">="+r+"."+n+".0":">="+t)+" "+(s=ae(u)?"":ae(c)?"<"+(+u+1)+".0.0":ae(f)?"<"+u+"."+(+c+1)+".0":l?"<="+u+"."+c+"."+f+"-"+l:"<="+s)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){try{t=new oe(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var i,o,a,s,u;switch(e=new V(e,n),t=new oe(t,n),r){case">":i=X,o=te,a=Z,s=">",u=">=";break;case"<":i=Z,o=ee,a=X,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var f=t.set[c],l=null,d=null;if(f.forEach((function(e){e.semver===ie&&(e=new ne(">=0.0.0")),l=l||e,d=d||e,i(e.semver,l.semver,n)?l=e:a(e.semver,d.semver,n)&&(d=e)})),l.operator===s||l.operator===u)return!1;if((!d.operator||d.operator===s)&&o(e,d.semver))return!1;if(d.operator===u&&a(e,d.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?i[z]:i[K],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new V(r[2],this.options.loose):this.semver=ie},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new V(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new oe(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new oe(this.value,t),ce(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&a||s||u},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[B]:i[q];e=e.replace(n,se),r("hyphen replace",e),e=e.replace(i[U],"$1$2$3"),r("comparator trim",e,i[U]),e=(e=(e=e.replace(i[N],"$1~")).replace(i[I],"$1^")).split(/\s+/).join(" ");var o=t?i[z]:i[K],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[D]:i[M];return e.replace(n,(function(t,n,i,o,a){var s;return r("caret",e,t,n,i,o,a),ae(n)?s="":ae(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[_]:i[P];return e.replace(n,(function(t,n,i,o,a){var s;return r("tilde",e,t,n,i,o,a),ae(n)?s="":ae(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(o)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+i+"."+o+"-"+a+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[k]:i[T];return e.replace(n,(function(t,n,i,o,a,s){r("xRange",e,t,n,i,o,a,s);var u=ae(i),c=u||ae(o),f=c||ae(a);return"="===n&&f&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&f?(c&&(o=0),a=0,">"===n?(n=">=",c?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",c?i=+i+1:o=+o+1),t=n+i+"."+o+"."+a):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":f&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[F],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a=a.map((function(e){return new ne(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new V(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new V(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new V(n=e,r)))})),n},t.minVersion=function(e,t){e=new oe(e,t);var r=new V("0.0.0");if(e.test(r))return r;if(r=new V("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new V(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!X(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,t.prerelease=function(e,t){var r=$(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new oe(e,r),t=new oe(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof V)return e;if("string"!=typeof e)return null;var t=e.match(i[O]);if(null==t)return null;return $(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})).satisfies(process.version,"^6.12.0 || >=8.0.0"),st=["RS256","RS384","RS512","ES256","ES384","ES512"],ut=["RS256","RS384","RS512"],ct=["HS256","HS384","HS512"];at&&(st.splice(3,0,"PS256","PS384","PS512"),ut.splice(3,0,"PS256","PS384","PS512"));var ft=17976931348623157e292,lt="[object GeneratorFunction]",dt=/^\s+|\s+$/g,pt=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,vt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,mt=parseInt;function yt(e){return e!=e}function St(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(t,(function(t){return e[t]}))}var wt,bt,Et=Object.prototype,xt=Et.hasOwnProperty,At=Et.toString,Ct=Et.propertyIsEnumerable,Lt=(wt=Object.keys,bt=Object,function(e){return wt(bt(e))}),Tt=Math.max;function kt(e,t){var r=Nt(e)||function(e){return function(e){return jt(e)&&Pt(e)}(e)&&xt.call(e,"callee")&&(!Ct.call(e,"callee")||"[object Arguments]"==At.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!xt.call(e,o)||i&&("length"==o||Rt(o,n))||r.push(o);return r}function Ot(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||Et,t!==n)return Lt(e);var t,r,n,i=[];for(var o in Object(e))xt.call(e,o)&&"constructor"!=o&&i.push(o);return i}function Rt(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||gt.test(e))&&e>-1&&e%1==0&&e<t}var Nt=Array.isArray;function Pt(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=_t(e)?At.call(e):"";return"[object Function]"==t||t==lt}(e)}function _t(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function jt(e){return!!e&&"object"==typeof e}var It=function(e,t,r,n){var i;e=Pt(e)?e:(i=e)?St(i,function(e){return Pt(e)?kt(e):Ot(e)}(i)):[],r=r&&!n?function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||jt(e)&&"[object Symbol]"==At.call(e)}(e))return NaN;if(_t(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_t(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(dt,"");var r=ht.test(e);return r||vt.test(e)?mt(e.slice(2),r?2:8):pt.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*ft}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(r):0;var o=e.length;return r<0&&(r=Tt(o+r,0)),function(e){return"string"==typeof e||!Nt(e)&&jt(e)&&"[object String]"==At.call(e)}(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&function(e,t,r){if(t!=t)return function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,yt,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r)>-1},Mt=Object.prototype.toString;var Dt=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==Mt.call(e)},zt=17976931348623157e292,Kt=/^\s+|\s+$/g,Ut=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Bt=/^0o[0-7]+$/i,Ft=parseInt,Ht=Object.prototype.toString;function $t(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var Vt=function(e){return"number"==typeof e&&e==function(e){var t=function(e){if(!e)return 0===e?e:0;if(Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Ht.call(e)}(e))return NaN;if($t(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=$t(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Kt,"");var r=qt.test(e);return r||Bt.test(e)?Ft(e.slice(2),r?2:8):Ut.test(e)?NaN:+e}(e))||-Infinity===e){return(e<0?-1:1)*zt}return e==e?e:0}(e),r=t%1;return t==t?r?t-r:t:0}(e)};Object.prototype.toString;var Wt=Function.prototype,Gt=Object.prototype,Jt=Wt.toString,Xt=Gt.hasOwnProperty,Zt=Jt.call(Object),Yt=Gt.toString,Qt=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);var er=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Yt.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Qt(e);if(null===t)return!0;var r=Xt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Jt.call(r)==Zt},tr=Object.prototype.toString,rr=Array.isArray;var nr=function(e){return"string"==typeof e||!rr(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==tr.call(e)};parseInt,Object.prototype.toString;var ir=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];at&&ir.splice(3,0,"PS256","PS384","PS512");It.bind(null,ir);var or=function(e,t,r,n){var i;if("function"!=typeof r||n||(n=r,r={}),r||(r={}),r=Object.assign({},r),i=n||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return i(new Ve("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return i(new Ve("nonce must be a non-empty string"));var o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return i(new Ve("jwt must be provided"));if("string"!=typeof e)return i(new Ve("jwt must be a string"));var a,s=e.split(".");if(3!==s.length)return i(new Ve("jwt malformed"));try{a=He(e,{complete:!0})}catch(e){return i(e)}if(!a)return i(new Ve("invalid token"));var u,c=a.header;if("function"==typeof t){if(!n)return i(new Ve("verify must be called asynchronous if secret or public key is provided as a callback"));u=t}else u=function(e,r){return r(null,t)};return u(c,(function(t,n){if(t)return i(new Ve("error in secret or public key callback: "+t.message));var u,f=""!==s[2].trim();if(!f&&n)return i(new Ve("jwt signature is required"));if(f&&!n)return i(new Ve("secret or public key must be provided"));if(f||r.algorithms||(r.algorithms=["none"]),r.algorithms||(r.algorithms=~n.toString().indexOf("BEGIN CERTIFICATE")||~n.toString().indexOf("BEGIN PUBLIC KEY")?st:~n.toString().indexOf("BEGIN RSA PUBLIC KEY")?ut:ct),!~r.algorithms.indexOf(a.header.alg))return i(new Ve("invalid algorithm"));try{u=Fe.verify(e,a.header.alg,n)}catch(e){return i(e)}if(!u)return i(new Ve("invalid signature"));var l=a.payload;if(void 0!==l.nbf&&!r.ignoreNotBefore){if("number"!=typeof l.nbf)return i(new Ve("invalid nbf value"));if(l.nbf>o+(r.clockTolerance||0))return i(new Ge("jwt not active",new Date(1e3*l.nbf)))}if(void 0!==l.exp&&!r.ignoreExpiration){if("number"!=typeof l.exp)return i(new Ve("invalid exp value"));if(o>=l.exp+(r.clockTolerance||0))return i(new Xe("jwt expired",new Date(1e3*l.exp)))}if(r.audience){var d=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(l.aud)?l.aud:[l.aud]).some((function(e){return d.some((function(t){return t instanceof RegExp?t.test(e):t===e}))})))return i(new Ve("jwt audience invalid. expected: "+d.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&l.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(l.iss)))return i(new Ve("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&l.sub!==r.subject)return i(new Ve("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&l.jti!==r.jwtid)return i(new Ve("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&l.nonce!==r.nonce)return i(new Ve("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof l.iat)return i(new Ve("iat required when maxAge is specified"));var p=ot(r.maxAge,l.iat);if(void 0===p)return i(new Ve('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=p+(r.clockTolerance||0))return i(new Xe("maxAge exceeded",new Date(1e3*p)))}if(!0===r.complete){var h=a.signature;return i(null,{header:c,payload:l,signature:h})}return i(null,l)}))};function ar(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var i=1,o="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--i){s++;break}}else if("("===e[s]&&(i++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at "+s);o+=e[s++]}else o+=e[s++]+e[s++];if(i)throw new TypeError("Unbalanced pattern at "+r);if(!o)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:o}),r=s}else{for(var a="",s=r+1;s<e.length;){var u=e.charCodeAt(s);if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;a+=e[s++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,i=void 0===n?"./":n,o="[^"+cr(t.delimiter||"/#?")+"]+?",a=[],s=0,u=0,c="",f=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},l=function(e){var t=f(e);if(void 0!==t)return t;var n=r[u],i=n.type,o=n.index;throw new TypeError("Unexpected "+i+" at "+o+", expected "+e)},d=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var p=f("CHAR"),h=f("NAME"),v=f("PATTERN");if(h||v){var g=p||"";-1===i.indexOf(g)&&(c+=g,g=""),c&&(a.push(c),c=""),a.push({name:h||s++,prefix:g,suffix:"",pattern:v||o,modifier:f("MODIFIER")||""})}else{var m=p||f("ESCAPED_CHAR");if(m)c+=m;else if(c&&(a.push(c),c=""),f("OPEN")){g=d();var y=f("NAME")||"",S=f("PATTERN")||"",w=d();l("CLOSE"),a.push({name:y||(S?s++:""),pattern:y&&!S?o:S,prefix:g,suffix:w,modifier:f("MODIFIER")||""})}else l("END")}}return a}function sr(e,t){return function(e,t){void 0===t&&(t={});var r=fr(t),n=t.encode,i=void 0===n?function(e){return e}:n,o=t.validate,a=void 0===o||o,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o){var u=t?t[o.name]:void 0,c="?"===o.modifier||"*"===o.modifier,f="*"===o.modifier||"+"===o.modifier;if(Array.isArray(u)){if(!f)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===u.length){if(c)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var l=0;l<u.length;l++){var d=i(u[l],o);if(a&&!s[n].test(d))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');r+=o.prefix+d+o.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!c){var p=f?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+p)}}else{d=i(String(u),o);if(a&&!s[n].test(d))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');r+=o.prefix+d+o.suffix}}else r+=o}return r}}(ar(e,t),t)}function ur(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,i=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var o=n[0],a=n.index,s=Object.create(null),u=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?s[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return i(e,r)})):s[r.name]=i(n[e],r)},c=1;c<n.length;c++)u(c);return{path:o,index:a,params:s}}}(dr(e,r,t),r,t)}function cr(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function fr(e){return e&&e.sensitive?"":"i"}function lr(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,i=void 0!==n&&n,o=r.start,a=void 0===o||o,s=r.end,u=void 0===s||s,c=r.encode,f=void 0===c?function(e){return e}:c,l="["+cr(r.endsWith||"")+"]|$",d="["+cr(r.delimiter||"/#?")+"]",p=a?"^":"",h=0,v=e;h<v.length;h++){var g=v[h];if("string"==typeof g)p+=cr(f(g));else{var m=cr(f(g.prefix)),y=cr(f(g.suffix));if(g.pattern)if(t&&t.push(g),m||y)if("+"===g.modifier||"*"===g.modifier){var S="*"===g.modifier?"?":"";p+="(?:"+m+"((?:"+g.pattern+")(?:"+y+m+"(?:"+g.pattern+"))*)"+y+")"+S}else p+="(?:"+m+"("+g.pattern+")"+y+")"+g.modifier;else p+="("+g.pattern+")"+g.modifier;else p+="(?:"+m+y+")"+g.modifier}}if(u)i||(p+=d+"?"),p+=r.endsWith?"(?="+l+")":"$";else{var w=e[e.length-1],b="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;i||(p+="(?:"+d+"(?="+l+"))?"),b||(p+="(?="+d+"|"+l+")")}return new RegExp(p,fr(r))}(ar(e,r),t,r)}function dr(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return dr(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",fr(r))}(e,t,r):lr(e,t,r)}function pr(e,t){return ur(t,{decode:decodeURIComponent})(e)}function hr(e,t){try{const r=e.toLowerCase();if(r.startsWith("https://")||r.startsWith("http://")){const{origin:r,pathname:n}=new URL(e),i=`${r}${sr(n,{encode:encodeURIComponent})(t)}`;return!e.endsWith("/")&&i.endsWith("/")?i.slice(0,-1):i}{const r=e.replace(/\?/g,"\\?");return sr(r,{encode:encodeURIComponent})(t)}}catch(t){return console.error(`Could not compile destination ${e}, returning null instead. Error: ${t}`),null}}function vr(e,t,r){const n=t?`${e}?${t}`:e,i=r.toString();return{status:i,statusDescription:o.STATUS_CODES[i],headers:{location:[{key:"Location",value:n}],refresh:308===r?[{key:"Refresh",value:"0;url="+n}]:[]}}}const gr=w.default.basePath,mr={__prerender_bypass:"",__next_preview_data:""},yr=e=>e?{now:()=>a.performance.now(),log:(e,t,r)=>{t&&r&&console.log(`${e}: ${r-t} (ms)`)}}:{now:()=>0,log:()=>{}},Sr=(e,t)=>{e.headers.host=[{key:"host",value:t}]},wr=e=>e.startsWith("/_next/data"),br=e=>{if(gr){if(!e.startsWith(gr))return"/404";e=e.slice(gr.length)}return e.endsWith("/")&&(e=e.slice(0,-1)),""===e?"/":e},Er=(e,t)=>{let r=e.replace("/_next/data/"+t.buildId,"").replace(".json","");return r=["/index",""].includes(r)?"/":r,r},xr=e=>{const{pages:{ssr:t,html:r}}=e,n={...t.dynamic,...r.dynamic};return i=>{let o=i;if(wr(i)&&(o=Er(o,e)),t.nonDynamic[o])return t.nonDynamic[o];for(const e in n){const{file:t,regex:r}=n[e];if(new RegExp(r,"i").test(o))return t}return void 0!==r.nonDynamic["/404"]?"pages/404.html":"pages/_error.js"}},Ar=async()=>{const{defaultRetryDecider:e,StandardRetryStrategy:t}=await Promise.resolve().then((function(){return yn}));return new t((async()=>3),{retryDecider:t=>"code"in t&&("ECONNRESET"===t.code||"EPIPE"===t.code||"ETIMEDOUT"===t.code)||e(t)})},Cr=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{const i=e.Records[0].cf.request,o=function(e,t){const r=e.headers.host;if(r&&r.length>0){const n=r[0].value,i=t.domainRedirects;if(i&&i[n])return`${i[n]}${e.uri}`}return null}(i,t);if(o)return vr(o,i.querystring,308);const a=n.basePath;let s=br(i.uri);const{pages:u,publicFiles:c}=t;let f=c[s],l=wr(s),d=i.uri;if(l||f)d.endsWith("/")&&(d=d.slice(0,-1));else if("/"!==i.uri&&""!==i.uri&&"/404"!==s){const e=t.trailingSlash;!e&&d.endsWith("/")&&(d=d.slice(0,-1)),e&&!d.endsWith("/")&&(d+="/")}if(d!==i.uri)return vr(d,i.querystring,308);const p=function(e,t){const r=t.redirects;for(const t of r){const r=pr(e,t.source);if(r){const e=hr(t.destination,r.params);return e?{redirectPath:e,statusCode:t.statusCode}:null}}return null}(i.uri,n);if(p)return vr(p.redirectPath,i.querystring,p.statusCode);if(!(u.html.nonDynamic[s]||u.ssr.nonDynamic[s]||f)&&!l){const e=function(e,t){const r=t.rewrites;for(const t of r){const r=pr(e,t.source);if(r)return hr(t.destination,r.params)}return null}(i.uri,n);e&&(i.uri=e,s=br(i.uri))}const h=u.html.nonDynamic[s],v=r.routes[s],g=i.origin.s3,m=h||v,y=(e=>{if("us-east-1"===e.region)return e.domainName;if(!e.domainName.includes(e.region))return e.domainName.replace("s3.amazonaws.com",`s3.${e.region}.amazonaws.com`);return e.domainName})(g),S=kr(s,r,t),{now:w,log:b}=yr(t.logLambdaExecutionTimes),E=(e=>(e.headers.cookie||[]).reduce(((e,t)=>{const r=U.parse(t.value);return r.__next_preview_data&&r.__prerender_bypass?r:e}),mr))(i),x=E.__next_preview_data&&E.__prerender_bypass;if(x)try{or(E.__next_preview_data,r.preview.previewModeSigningKey)}catch(e){return console.error("Failed preview mode verification for URI:",i.uri),{status:"403",statusDescription:"Forbidden"}}g.domainName=y;e:if(f||h||m&&!x||S&&!x||l&&!x){if(f)g.path=a+"/public",a&&(i.uri=i.uri.replace(a,""));else if(m||S){g.path=a+"/static-pages";const e="/"===s?"/index":s;i.uri=e+".html"}else if(l){const e=Er(s,t),n=xr(t)(e);if("pages/404.html"===n)g.path=a+"/static-pages",i.uri=n.replace("pages","");else if("pages/_error.js"===n||!r.routes[e])break e}return Sr(i,y),i}const A=xr(t)(s);if(A.endsWith(".html")&&!x)return g.path=a+"/static-pages",i.uri=A.replace("pages",""),Sr(i,y),i;const C=w();let L=require("./"+A);b("require JS execution time",C,w());const T=w(),{req:k,res:O,responsePromise:R}=P(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression});try{if("pages/_error.js"===A&&(O.statusCode=404),l){const{renderOpts:e}=await L.renderReqToHTML(k,O,"passthrough");O.setHeader("Content-Type","application/json"),O.end(JSON.stringify(e.pageData))}else await L.render(k,O)}catch(e){console.error(`Error rendering page: ${A}. Error:\n${e}\nRendering Next.js error page.`),O.statusCode=500,L=require("./pages/_error.js"),await L.render(k,O)}const N=await R;return b("SSR execution time",T,w()),Or(N,O),N},Lr=async({event:e,manifest:t,prerenderManifest:r})=>{var n,i;const o=e.Records[0].cf.response,a=e.Records[0].cf.request,{status:s}=o;if("403"!==s)return"/404.html"===a.uri&&(o.status="404",o.statusDescription="Not Found"),o;if("PUT"===a.method||"DELETE"===a.method)return o;const u=br(a.uri),{domainName:c,region:f}=a.origin.s3,l=c.replace(`.s3.${f}.amazonaws.com`,""),{S3Client:d}=await Promise.resolve().then((function(){return ol})),p=new d({region:null===(i=null===(n=a.origin)||void 0===n?void 0:n.s3)||void 0===i?void 0:i.region,maxAttempts:3,retryStrategy:await Ar()});let h;if(wr(u)&&!(h=xr(t)(u)).endsWith(".html")){const r=require("./"+h),{req:n,res:i,responsePromise:s}=P(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression}),c=!!r.getStaticProps,{renderOpts:f,html:d}=await r.renderReqToHTML(n,i,"passthrough");if(c){const e={Bucket:l,Key:`${gr}${""===gr?"":"/"}${u.replace(/^\//,"")}`,Body:JSON.stringify(f.pageData),ContentType:"application/json"},r={Bucket:l,Key:`${gr}${""===gr?"":"/"}static-pages/${a.uri.replace(`/_next/data/${t.buildId}/`,"").replace(".json",".html")}`,Body:d,ContentType:"text/html",CacheControl:"public, max-age=0, s-maxage=2678400, must-revalidate"},{PutObjectCommand:n}=await Promise.resolve().then((function(){return Ed}));await Promise.all([p.send(new n(e)),p.send(new n(r))])}return i.writeHead(200,o.headers),i.setHeader("Content-Type","application/json"),i.end(JSON.stringify(f.pageData)),await s}{const e=kr(u,r,t);if(!e)return o;let n=`${gr}${""===gr?"":"/"}static-pages${e.fallback||"/404.html"}`;const{GetObjectCommand:i}=await Promise.resolve().then((function(){return xd})),a=await Promise.resolve().then((function(){return jd}));let s;const c={Bucket:l,Key:n},{Body:f}=await p.send(new i(c));return s=await a.default(f),{status:e.fallback?"200":"404",statusDescription:e.fallback?"OK":"Not Found",headers:{...o.headers,"content-type":[{key:"Content-Type",value:"text/html"}],"cache-control":[{key:"Cache-Control",value:"public, max-age=0, s-maxage=2678400, must-revalidate"}]},body:s}}},Tr=e=>"origin-response"===e.Records[0].cf.config.eventType,kr=(e,t,r)=>{const{pages:{ssr:n,html:i}}=r;if(n.nonDynamic[e]||i.nonDynamic[e])return!1;let o=void 0;return!Object.values({...n.dynamic,...i.dynamic}).find((r=>{if(o)return!1;if(new RegExp(r.regex).test(e)){return!Object.keys(t.dynamicRoutes).find((e=>{const n=r.file===`pages${e}.js`;return n&&(o=t.dynamicRoutes[e]),n}))}return!1}))&&(o||Object.values(t.dynamicRoutes).find((t=>new RegExp(t.routeRegex).test(e))))},Or=(e,t)=>{404==t.statusCode?(e.status="404",e.statusDescription="Not Found"):500==t.statusCode&&(e.status="500",e.statusDescription="Internal Server Error")};var Rr=function(e,t){return(Rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function Nr(e,t){function r(){this.constructor=e}Rr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Pr=function(){return(Pr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function _r(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function jr(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function Ir(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Mr(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dr(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function zr(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Dr(arguments[t]));return e}function Kr(e){return this instanceof Kr?(this.v=e,this):new Kr(e)}function Ur(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=i[e](t)).value instanceof Kr?Promise.resolve(r.value.v).then(u,c):f(o[0][2],r)}catch(e){f(o[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function f(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function qr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Mr(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}var Br=function(e){return function(t){return function(r){return jr(void 0,void 0,void 0,(function(){return Ir(this,(function(n){return[2,e.retryStrategy.retry(t,r)]}))}))}}},Fr={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},Hr=function(e){return{applyToStack:function(t){t.add(Br(e),Fr)}}},$r=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),Vr=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,r=new e(Pr(Pr({},this),{headers:Pr({},this.headers)}));return r.query&&(r.query=(t=r.query,Object.keys(t).reduce((function(e,r){var n,i=t[r];return Pr(Pr({},e),((n={})[r]=Array.isArray(i)?zr(i):i,n))}),{}))),r},e}();for(var Wr=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Gr=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],Jr=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Xr=[500,502,503,504],Zr=function(e){var t;return Gr.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},Yr=function(){return L.default.randomBytes(16)},Qr=[],en=0;en<256;++en)Qr[en]=(en+256).toString(16).substr(1);var tn,rn,nn=function(e,t){var r=t||0,n=Qr;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},on=0,an=0;var sn=function(e,t,r){var n=t&&r||0,i=t||[],o=(e=e||{}).node||tn,a=void 0!==e.clockseq?e.clockseq:rn;if(null==o||null==a){var s=Yr();null==o&&(o=tn=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=rn=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:an+1,f=u-on+(c-an)/1e4;if(f<0&&void 0===e.clockseq&&(a=a+1&16383),(f<0||u>on)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");on=u,an=c,rn=a;var l=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=255&l;var d=u/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var p=0;p<6;++p)i[n+p]=o[p];return t||nn(i)};var un=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||Yr)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||nn(i)},cn=un;cn.v1=sn,cn.v4=un;var fn=cn,ln=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},dn=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return Wr.includes(e.name)}(e)||Zr(e)||function(e){var t;return Jr.includes(e.name)||Xr.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},pn=function(){function e(e,t){var r,n,i,o,a,s,u,c;this.maxAttemptsProvider=e,this.retryDecider=null!==(r=null==t?void 0:t.retryDecider)&&void 0!==r?r:dn,this.delayDecider=null!==(n=null==t?void 0:t.delayDecider)&&void 0!==n?n:ln,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(a=o=500,s=o,u=function(e){return"TimeoutError"===e.name?10:5},c=function(e){return u(e)<=s},Object.freeze({hasRetryTokens:c,retrieveRetryTokens:function(e){if(!c(e))throw new Error("No retry token available");var t=u(e);return s-=t,t},releaseRetryTokens:function(e){s+=null!=e?e:1,s=Math.min(s,a)}}))}return e.prototype.shouldRetry=function(e,t,r){return t<r&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return jr(this,void 0,void 0,(function(){var e;return Ir(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return jr(this,void 0,void 0,(function(){var r,n,i,o,a,s,u,c;return Ir(this,(function(f){switch(f.label){case 0:return n=0,i=0,[4,this.getMaxAttempts()];case 1:o=f.sent(),a=t.request,Vr.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=fn.v4()),s=function(){var s,c,f,l,d;return Ir(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,,5]),Vr.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt="+(n+1)+"; max="+o),[4,e(t)];case 1:return s=p.sent(),c=s.response,f=s.output,u.retryQuota.releaseRetryTokens(r),f.$metadata.attempts=n+1,f.$metadata.totalRetryDelay=i,[2,{value:{response:c,output:f}}];case 2:return l=p.sent(),n++,u.shouldRetry(l,n,o)?(r=u.retryQuota.retrieveRetryTokens(l),d=u.delayDecider(Zr(l)?500:100,n),i+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return p.sent(),[2,"continue"];case 4:throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=n,l.$metadata.totalRetryDelay=i,l;case 5:return[2]}}))},u=this,f.label=2;case 2:return[5,s()];case 3:return"object"==typeof(c=f.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),hn={environmentVariableSelector:function(e){var t=e.AWS_MAX_ATTEMPTS;if(t){var r=parseInt(t);if(Number.isNaN(r))throw new Error('Environment variable AWS_MAX_ATTEMPTS mast be a number, got "'+t+'"');return r}},configFileSelector:function(e){var t=e.max_attempts;if(t){var r=parseInt(t);if(Number.isNaN(r))throw new Error('Shared config file entry max_attempts mast be a number, got "'+t+'"');return r}},default:3},vn=function(e){var t=gn(e.maxAttempts);return Pr(Pr({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new pn(t)})},gn=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},mn={environmentVariableSelector:function(e){return e.AWS_RETRY_MODE},configFileSelector:function(e){return e.retry_mode},default:"standard"},yn=Object.freeze({__proto__:null,retryMiddleware:Br,retryMiddlewareOptions:Fr,getRetryPlugin:Hr,DEFAULT_MAX_ATTEMPTS:3,DEFAULT_RETRY_MODE:"standard",StandardRetryStrategy:pn,ENV_MAX_ATTEMPTS:"AWS_MAX_ATTEMPTS",CONFIG_MAX_ATTEMPTS:"max_attempts",NODE_MAX_ATTEMPT_CONFIG_OPTIONS:hn,resolveRetryConfig:vn,ENV_RETRY_MODE:"AWS_RETRY_MODE",CONFIG_RETRY_MODE:"retry_mode",NODE_RETRY_MODE_CONFIG_OPTIONS:mn,defaultDelayDecider:ln,defaultRetryDecider:dn}),Sn="@aws-sdk/client-s3",wn="1.0.0-rc.3",bn=function(e){var t=e.endpoint,r=e.urlParser;if("string"==typeof t){var n=Promise.resolve(r(t));return function(){return n}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},En=function(e){return jr(void 0,void 0,void 0,(function(){var t,r,n,i,o;return Ir(this,(function(a){switch(a.label){case 0:return t=e.tls,r=void 0===t||t,[4,e.region()];case 1:if(n=a.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(n)];case 2:if(!(i=(null!==(o=a.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((r?"https:":"http:")+"//"+i)]}}))}))},xn={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},An=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Cn=function(e){function t(t,r){void 0===r&&(r=!0);var n=e.call(this,t)||this;return n.tryNextLink=r,n}return Nr(t,e),t}(Error);function Ln(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){var t,r,n=Promise.reject(new Cn("No providers in chain")),i=function(e){n=n.catch((function(t){if(null==t?void 0:t.tryNextLink)return e();throw t}))};try{for(var o=Mr(e),a=o.next();!a.done;a=o.next()){i(a.value)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}}var Tn=function(e,t,r){var n,i;if(void 0===t)return function(){return i||(n=e(),i=!0),n};var o=!1;return function(){return jr(void 0,void 0,void 0,(function(){var a;return Ir(this,(function(s){switch(s.label){case 0:return i||(n=e(),i=!0),o?[2,n]:[4,n];case 1:return a=s.sent(),r&&!r(a)?(o=!0,[2,a]):t(a)?[2,n=e()]:[2,a]}}))}))}};function kn(e){return new Promise((function(t,r){var n=o.request(Pr({method:"GET"},e));n.on("error",(function(e){r(Object.assign(new Cn("Unable to connect to instance metadata service"),e))})),n.on("timeout",(function(){r(new Error("TimeoutError"))})),n.on("response",(function(e){var n=e.statusCode,i=void 0===n?400:n;(i<200||300<=i)&&r(Object.assign(new Cn("Error response received from instance metadata service"),{statusCode:i}));var o=[];e.on("data",(function(e){o.push(e)})),e.on("end",(function(){t(s.Buffer.concat(o))}))})),n.end()}))}var On=function(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration},Rn=function(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}},Nn=function(e){var t=e.maxRetries,r=void 0===t?0:t,n=e.timeout;return{maxRetries:r,timeout:void 0===n?1e3:n}},Pn=function(e,t){for(var r=e(),n=0;n<t;n++)r=r.catch(e);return r},_n="AWS_CONTAINER_CREDENTIALS_FULL_URI",jn="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";function In(e){var t=this;void 0===e&&(e={});var r=Nn(e),n=r.timeout,i=r.maxRetries;return function(){return function(){if(process.env[jn])return Promise.resolve({hostname:"169.254.170.2",path:process.env[jn]});if(process.env[_n]){var e=f.parse(process.env[_n]);return e.hostname&&e.hostname in Dn?e.protocol&&e.protocol in zn?Promise.resolve(Pr(Pr({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new Cn(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new Cn(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new Cn("The container metadata credential provider cannot be used unless the "+jn+" or "+_n+" environment variable is set",!1))}().then((function(e){return Pn((function(){return jr(t,void 0,void 0,(function(){var t,r,i;return Ir(this,(function(o){switch(o.label){case 0:return i=(r=JSON).parse,[4,Mn(n,e)];case 1:if(t=i.apply(r,[o.sent()]),!On(t))throw new Cn("Invalid response received from instance metadata service.");return[2,Rn(t)]}}))}))}),i)}))}}function Mn(e,t){if(process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN){var r=t.headers,n=void 0===r?{}:r;n.Authorization=process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,t.headers=n}return kn(Pr(Pr({},t),{timeout:e})).then((function(e){return e.toString()}))}var Dn={localhost:!0,"127.0.0.1":!0},zn={"http:":!0,"https:":!0};var Kn="169.254.169.254",Un="/latest/meta-data/iam/security-credentials/",qn=function(e){return jr(void 0,void 0,void 0,(function(){return Ir(this,(function(t){return[2,kn(Pr(Pr({},e),{host:Kn,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]}))}))},Bn=function(e){return jr(void 0,void 0,void 0,(function(){return Ir(this,(function(t){switch(t.label){case 0:return[4,kn(Pr(Pr({},e),{host:Kn,path:Un}))];case 1:return[2,t.sent().toString()]}}))}))},Fn=function(e,t){return jr(void 0,void 0,void 0,(function(){var r,n,i;return Ir(this,(function(o){switch(o.label){case 0:return i=(n=JSON).parse,[4,kn(Pr(Pr({},t),{host:Kn,path:Un+e}))];case 1:if(r=i.apply(n,[o.sent().toString()]),!On(r))throw new Cn("Invalid response received from instance metadata service.");return[2,Rn(r)]}}))}))},Hn=function(){return{}};function $n(e){void 0===e&&(e={});var t=e.filepath,r=void 0===t?process.env.AWS_SHARED_CREDENTIALS_FILE||p.join(Xn(),".aws","credentials"):t,n=e.configFilepath,i=void 0===n?process.env.AWS_CONFIG_FILE||p.join(Xn(),".aws","config"):n;return Promise.all([Jn(i).then(Gn).then(Wn).catch(Hn),Jn(r).then(Gn).catch(Hn)]).then((function(e){var t=Dr(e,2);return{configFile:t[0],credentialsFile:t[1]}}))}var Vn=/^profile\s(["'])?([^\1]+)\1$/;function Wn(e){var t,r,n={};try{for(var i=Mr(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=o.value,s=void 0;if("default"===a)n.default=e.default;else if(s=Vn.exec(a)){var u=Dr(s,3),c=(u[0],u[1],u[2]);c&&(n[c]=e[a])}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}function Gn(e){var t,r,n,i={};try{for(var o=Mr(e.split(/\r?\n/)),a=o.next();!a.done;a=o.next()){var s=a.value,u=(s=s.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(u)n=u[1];else if(n){var c=s.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);c&&(i[n]=i[n]||{},i[n][c[1]]=c[2])}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}function Jn(e){return new Promise((function(t,r){l.readFile(e,"utf8",(function(e,n){e?r(e):t(n)}))}))}function Xn(){var e=process.env,t=e.HOME,r=e.USERPROFILE,n=e.HOMEPATH,i=e.HOMEDRIVE,o=void 0===i?"C:"+p.sep:i;return t||(r||(n?""+o+n:d.homedir()))}function Zn(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1}function Yn(e){return void 0===e&&(e={}),function(){return ti(e).then((function(t){return ei(Qn(e),t,e)}))}}function Qn(e){return e.profile||process.env.AWS_PROFILE||"default"}function ei(e,t,r,n){return void 0===n&&(n={}),jr(this,void 0,void 0,(function(){var i,o,a,s,u,c,f,l,d,p,h,v,g;return Ir(this,(function(m){switch(m.label){case 0:if(i=t[e],Object.keys(n).length>0&&Zn(i))return[2,ri(i)];if(y=i,!(Boolean(y)&&"object"==typeof y&&"string"==typeof y.role_arn&&"string"==typeof y.source_profile&&["undefined","string"].indexOf(typeof y.role_session_name)>-1&&["undefined","string"].indexOf(typeof y.external_id)>-1&&["undefined","string"].indexOf(typeof y.mfa_serial)>-1))return[3,4];if(o=i.external_id,a=i.mfa_serial,s=i.role_arn,u=i.role_session_name,c=void 0===u?"aws-sdk-js-"+Date.now():u,f=i.source_profile,!r.roleAssumer)throw new Cn("Profile "+e+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(f in n)throw new Cn("Detected a cycle attempting to resolve credentials for profile "+Qn(r)+". Profiles visited: "+Object.keys(n).join(", "),!1);if(l=ei(f,t,r,Pr(Pr({},n),((g={})[f]=!0,g))),d={RoleArn:s,RoleSessionName:c,ExternalId:o},!a)return[3,2];if(!r.mfaCodeProvider)throw new Cn("Profile "+e+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return d.SerialNumber=a,p=d,[4,r.mfaCodeProvider(a)];case 1:p.TokenCode=m.sent(),m.label=2;case 2:return v=(h=r).roleAssumer,[4,l];case 3:return[2,v.apply(h,[m.sent(),d])];case 4:if(Zn(i))return[2,ri(i)];throw new Cn("Profile "+e+" could not be found or parsed in shared credentials file.")}var y}))}))}function ti(e){var t=e.loadedConfig;return(void 0===t?$n(e):t).then((function(e){var t=e.configFile,r=e.credentialsFile;return Pr(Pr({},t),r)}))}function ri(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})}function ni(e){return void 0===e&&(e={}),function(){return ti(e).then((function(t){return function(e,t,r){return jr(this,void 0,void 0,(function(){var r,n;return Ir(this,(function(i){switch(i.label){case 0:return r=t[e],t[e]?void 0===(n=r.credential_process)?[3,2]:[4,ii(n).then((function(t){var r;try{r=JSON.parse(t)}catch(t){throw Error("Profile "+e+" credential_process returned invalid JSON.")}var n,i=r.Version,o=r.AccessKeyId,a=r.SecretAccessKey,s=r.SessionToken,u=r.Expiration;if(1!==i)throw Error("Profile "+e+" credential_process did not return Version 1.");if(void 0===o||void 0===a)throw Error("Profile "+e+" credential_process returned invalid credentials.");if(u){var c=new Date;if(new Date(u)<c)throw Error("Profile "+e+" credential_process returned expired credentials.");n=Math.floor(new Date(u).valueOf()/1e3)}return{accessKeyId:o,secretAccessKey:a,sessionToken:s,expirationUnix:n}})).catch((function(e){throw new Cn(e.message)}))]:[3,4];case 1:return[2,i.sent()];case 2:throw new Cn("Profile "+e+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Cn("Profile "+e+" could not be found in shared credentials file.");case 5:return[2]}}))}))}(Qn(e),t)}))}}function ii(e){return new Promise((function(t,r){h.exec(e,(function(e,n){e?r(e):t(n.trim())}))}))}var oi=function(e,t){return(oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var ai=function(){return(ai=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function si(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ui(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function ci(e){return this instanceof ci?(this.v=e,this):new ci(e)}for(var fi=Object.freeze({__proto__:null,__extends:function(e,t){function r(){this.constructor=e}oi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return ai},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},__decorate:function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},__param:function(e,t){return function(r,n){t(r,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator:function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__createBinding:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},__exportStar:function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])},__values:si,__read:ui,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ui(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},__await:ci,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=i[e](t)).value instanceof ci?Promise.resolve(r.value.v).then(u,c):f(o[0][2],r)}catch(e){f(o[0][3],e)}var r}function u(e){s("next",e)}function c(e){s("throw",e)}function f(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:ci(e[n](t)),done:"return"===n}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=si(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}}),li=q((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Crc32=t.crc32=void 0,t.crc32=function(e){return(new r).update(e).digest()};var r=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var i=fi.__values(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.checksum=this.checksum>>>8^n[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=r;var n=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])})),di={},pi={},hi=0;hi<256;hi++){var vi=hi.toString(16).toLowerCase();1===vi.length&&(vi="0"+vi),di[hi]=vi,pi[vi]=hi}function gi(e){for(var t="",r=0;r<e.byteLength;r++)t+=di[e[r]];return t}var mi=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var r=new Uint8Array(8),n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&yi(r),new e(r)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&yi(e),parseInt(gi(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function yi(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var Si,wi=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,r,n,i,o=[];try{for(var a=Mr(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}var f=new Uint8Array(o.reduce((function(e,t){return e+t.byteLength}),0)),l=0;try{for(var d=Mr(o),p=d.next();!p.done;p=d.next()){var h=p.value;f.set(h,l),l+=h.byteLength}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return f},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":var n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var a=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+a.byteLength));s.setUint8(0,7),s.setUint16(1,a.byteLength,!1);var u=new Uint8Array(s.buffer);return u.set(a,3),u;case"timestamp":var c=new Uint8Array(9);return c[0]=8,c.set(mi.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!Ri.test(e.value))throw new Error("Invalid UUID received: "+e.value);var f=new Uint8Array(17);return f[0]=9,f.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var n=e.substr(r,2).toLowerCase();if(!(n in pi))throw new Error("Cannot decode unrecognized sequence "+n+" as hexadecimal");t[r/2]=pi[n]}return t}(e.value.replace(/\-/g,"")),1),f}},e.prototype.parse=function(e){for(var t={},r=0;r<e.byteLength;){var n=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,n));switch(r+=n,e.getUint8(r++)){case 0:t[i]={type:bi,value:!0};break;case 1:t[i]={type:bi,value:!1};break;case 2:t[i]={type:Ei,value:e.getInt8(r++)};break;case 3:t[i]={type:xi,value:e.getInt16(r,!1)},r+=2;break;case 4:t[i]={type:Ai,value:e.getInt32(r,!1)},r+=4;break;case 5:t[i]={type:Ci,value:new mi(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:var o=e.getUint16(r,!1);r+=2,t[i]={type:Li,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:var a=e.getUint16(r,!1);r+=2,t[i]={type:Ti,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:t[i]={type:ki,value:new Date(new mi(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:var s=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[i]={type:Oi,value:gi(s.subarray(0,4))+"-"+gi(s.subarray(4,6))+"-"+gi(s.subarray(6,8))+"-"+gi(s.subarray(8,10))+"-"+gi(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(Si||(Si={}));var bi="boolean",Ei="byte",xi="short",Ai="integer",Ci="long",Li="binary",Ti="string",ki="timestamp",Oi="uuid",Ri=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Ni=function(){function e(e,t){this.headerMarshaller=new wi(e,t)}return e.prototype.marshall=function(e){var t=e.headers,r=e.body,n=this.headerMarshaller.format(t),i=n.byteLength+r.byteLength+16,o=new Uint8Array(i),a=new DataView(o.buffer,o.byteOffset,o.byteLength),s=new li.Crc32;return a.setUint32(0,i,!1),a.setUint32(4,n.byteLength,!1),a.setUint32(8,s.update(o.subarray(0,8)).digest(),!1),o.set(n,12),o.set(r,n.byteLength+12),a.setUint32(i-4,s.update(o.subarray(8,i-4)).digest(),!1),o},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,r=e.byteOffset,n=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(n,r,t),o=i.getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var a=i.getUint32(4,!1),s=i.getUint32(8,!1),u=i.getUint32(t-4,!1),c=(new li.Crc32).update(new Uint8Array(n,r,8));if(s!==c.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(n,r+8,t-12)),u!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+u);return{headers:new DataView(n,r+8+4,a),body:new Uint8Array(n,r+8+4+a,o-a-16)}}(e),r=t.headers,n=t.body;return{headers:this.headerMarshaller.parse(r),body:n}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();var Pi=function(){function e(e){var t=e.utf8Encoder,r=e.utf8Decoder;this.eventMarshaller=new Ni(t,r),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){var r,n,i,o,a,s,u;return function(e,t){var r;return(r={})[Symbol.asyncIterator]=function(){return Ur(this,arguments,(function(){var r,n,i,o,a,s,u,c,f,l,d,p,h,v,g,m,y;return Ir(this,(function(S){switch(S.label){case 0:S.trys.push([0,12,13,18]),r=qr(e),S.label=1;case 1:return[4,Kr(r.next())];case 2:if((n=S.sent()).done)return[3,11];if(i=n.value,o=t.eventMarshaller.unmarshall(i),"error"!==(a=o.headers[":message-type"].value))return[3,3];throw(s=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,s;case 3:return"exception"!==a?[3,5]:(u=o.headers[":exception-type"].value,(v={})[u]=o,c=v,[4,Kr(t.deserializer(c))]);case 4:if((f=S.sent()).$unknown)throw(l=new Error(t.toUtf8(o.body))).name=u,l;throw f[u];case 5:return"event"!==a?[3,9]:((g={})[o.headers[":event-type"].value]=o,d=g,[4,Kr(t.deserializer(d))]);case 6:return(p=S.sent()).$unknown?[3,10]:[4,Kr(p)];case 7:return[4,S.sent()];case 8:return S.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return h=S.sent(),m={error:h},[3,18];case 13:return S.trys.push([13,,16,17]),n&&!n.done&&(y=r.return)?[4,Kr(y.call(r))]:[3,15];case 14:S.sent(),S.label=15;case 15:return[3,17];case 16:if(m)throw m.error;return[7];case 17:return[7];case 18:return[2]}}))}))},r}((r=e,i=0,o=0,a=null,s=null,u=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);i=e,o=4,a=new Uint8Array(e),new DataView(a.buffer).setUint32(0,e,!1)},(n={})[Symbol.asyncIterator]=function(){return Ur(this,arguments,(function(){var e,t,n,c,f,l,d,p;return Ir(this,(function(h){switch(h.label){case 0:e=r[Symbol.asyncIterator](),h.label=1;case 1:return[4,Kr(e.next())];case 2:return t=h.sent(),n=t.value,t.done?i?[3,4]:[4,Kr(void 0)]:[3,10];case 3:return[2,h.sent()];case 4:return i!==o?[3,7]:[4,Kr(a)];case 5:return[4,h.sent()];case 6:return h.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Kr(void 0)];case 9:return[2,h.sent()];case 10:c=n.length,f=0,h.label=11;case 11:if(!(f<c))return[3,15];if(!a){if(l=c-f,s||(s=new Uint8Array(4)),d=Math.min(4-o,l),s.set(n.slice(f,f+d),o),f+=d,(o+=d)<4)return[3,15];u(new DataView(s.buffer).getUint32(0,!1)),s=null}return p=Math.min(i-o,c-f),a.set(n.slice(f,f+p),o),o+=p,f+=p,i&&i===o?[4,Kr(a)]:[3,14];case 12:return[4,h.sent()];case 13:h.sent(),a=null,i=0,o=0,h.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},n),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var r,n=this;return(r={})[Symbol.asyncIterator]=function(){return Ur(this,arguments,(function(){var r,i,o,a,s,u;return Ir(this,(function(c){switch(c.label){case 0:c.trys.push([0,7,8,13]),r=qr(e),c.label=1;case 1:return[4,Kr(r.next())];case 2:return(i=c.sent()).done?[3,6]:(o=i.value,[4,Kr(n.eventMarshaller.marshall(t(o)))]);case 3:return[4,c.sent()];case 4:c.sent(),c.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return a=c.sent(),s={error:a},[3,13];case 8:return c.trys.push([8,,11,12]),i&&!i.done&&(u=r.return)?[4,Kr(u.call(r))]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(s)throw s.error;return[7];case 12:return[7];case 13:return[4,Kr(new Uint8Array(0))];case 14:return[4,c.sent()];case 15:return c.sent(),[2]}}))}))},r},e}();var _i=function(){function e(e){var t=e.utf8Encoder,r=e.utf8Decoder;this.eventMarshaller=new Ni(t,r),this.universalMarshaller=new Pi({utf8Decoder:r,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var r="function"==typeof e[Symbol.asyncIterator]?e:function(e){return Ur(this,arguments,(function(){var t,r,n,i;return Ir(this,(function(o){switch(o.label){case 0:t=!1,r=!1,n=new Array,e.on("error",(function(e){if(t||(t=!0),e)throw e})),e.on("data",(function(e){n.push(e)})),e.on("end",(function(){t=!0})),o.label=1;case 1:return r?[3,6]:[4,Kr(new Promise((function(e){return setTimeout((function(){return e(n.shift())}),0)})))];case 2:return(i=o.sent())?[4,Kr(i)]:[3,5];case 3:return[4,o.sent()];case 4:o.sent(),o.label=5;case 5:return r=t&&0===n.length,[3,1];case 6:return[2]}}))}))}(e);return this.universalMarshaller.deserialize(r,t)},e.prototype.serialize=function(e,t){var r=this.universalMarshaller.serialize(e,t);if("function"==typeof n.Readable.from)return n.Readable.from(r);var i=r[Symbol.asyncIterator](),o=new n.Readable({autoDestroy:!0,objectMode:!0,read:function(){return jr(this,void 0,void 0,(function(){var e=this;return Ir(this,(function(t){return i.next().then((function(t){var r=t.done,n=t.value;r?e.push(null):e.push(n)})).catch((function(t){e.destroy(t)})),[2]}))}))}});return o.on("error",(function(){o.destroy()})),o.on("end",(function(){o.destroy()})),o},e}(),ji=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},Ii=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=e.byteLength-t),!ji(e))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return s.Buffer.from(e,t,r)},Mi=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?s.Buffer.from(e,t):s.Buffer.from(e)},Di=function(){function e(e,t){this.hash=t?c.createHmac(e,zi(t)):c.createHash(e)}return e.prototype.update=function(e,t){this.hash.update(zi(e,t))},e.prototype.digest=function(){return Promise.resolve(this.hash.digest())},e}();function zi(e,t){return s.Buffer.isBuffer(e)?e:"string"==typeof e?Mi(e,t):ArrayBuffer.isView(e)?Ii(e.buffer,e.byteOffset,e.byteLength):Ii(e)}var Ki=function(e){function t(t,r){var n=e.call(this,r)||this;return n.hash=t,n}return Nr(t,e),t.prototype._write=function(e,t,r){try{this.hash.update(e)}catch(e){return r(e)}r()},t}(n.Writable);var Ui=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},qi=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Bi=/(\d+\.){3}\d+/,Fi=/\.\./,Hi=/\./,$i=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,Vi=/^s3(-external-1)?\.amazonaws\.com$/,Wi=function(e){return Ji(e)?e.replace(/fips-|-fips/,""):e},Gi=function(e){var t=e.match($i);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},Ji=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Xi=function(e,t){return e===t||Wi(e)===t||e===Wi(t)},Zi=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&Hi.test(e))throw new Error("Invalid DNS label "+e)},Yi=function(e){var t=e.baseHostname;return $i.test(t)?function(e){return"string"==typeof e.bucketName}(e)?eo(e):Qi(e):{bucketEndpoint:!1,hostname:t}},Qi=function(e){var t,r=Dr((t=e.baseHostname,Vi.test(t)?[t.replace(".amazonaws.com",""),"amazonaws.com"]:Gi(t)),2),n=r[0],i=r[1],o=e.pathStyleEndpoint,a=e.dualstackEndpoint,s=void 0!==a&&a,u=e.accelerateEndpoint,c=void 0!==u&&u,f=e.tlsCompatible,l=void 0===f||f,d=e.useArnRegion,p=e.bucketName,h=e.clientPartition,v=void 0===h?"aws":h,g=e.clientSigningRegion,m=void 0===g?n:g;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:o,accelerateEndpoint:c,tlsCompatible:l});var y=p.service,S=p.partition,w=p.accountId,b=p.region,E=p.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(y),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(S,{clientPartition:v}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(w),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!Xi(e,t.clientRegion)&&!Xi(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&Ji(e))throw new Error("Endpoint does not support FIPS region")}(b,{useArnRegion:d,clientRegion:n,clientSigningRegion:m});var x=function(e){var t=e.includes(":")?":":"/",r=Dr(e.split(t)),n=r[0],i=r.slice(1);if("accesspoint"===n){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===n){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=Dr(i,3),a=o[0];return o[1],{outpostId:a,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(E),A=x.accesspointName,C=x.outpostId;Zi(A+"-"+w,{tlsCompatible:l});var L=d?b:n,T=d?b:m;return C?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(y),Zi(C,{tlsCompatible:l}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(s),function(e){if(Ji(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(L),{bucketEndpoint:!0,hostname:A+"-"+w+"."+C+".s3-outposts."+L+"."+i,signingRegion:T,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(y),{bucketEndpoint:!0,hostname:A+"-"+w+".s3-accesspoint"+(s?".dualstack":"")+"."+L+"."+i,signingRegion:T})},eo=function(e){var t,r=e.accelerateEndpoint,n=void 0!==r&&r,i=e.baseHostname,o=e.bucketName,a=e.dualstackEndpoint,s=void 0!==a&&a,u=e.pathStyleEndpoint,c=void 0!==u&&u,f=e.tlsCompatible,l=void 0===f||f,d=Dr((t=i,Vi.test(t)?["us-east-1","amazonaws.com"]:Gi(t)),2),p=d[0],h=d[1];return c||!function(e){return qi.test(e)&&!Bi.test(e)&&!Fi.test(e)}(o)||l&&Hi.test(o)?{bucketEndpoint:!1,hostname:s?"s3.dualstack."+p+"."+h:i}:(n?i="s3-accelerate"+(s?".dualstack":"")+"."+h:s&&(i="s3.dualstack."+p+"."+h),{bucketEndpoint:!0,hostname:o+"."+i})},to=function(e){return function(t,r){return function(n){return jr(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,f,l,d,p,h,v,g,m,y,S,w;return Ir(this,(function(b){switch(b.label){case 0:return i=n.input.Bucket,o=e.bucketEndpoint,a=n.request,Vr.isInstance(a)?e.bucketEndpoint?(a.hostname=i,[3,6]):[3,1]:[3,7];case 1:return Ui(i)?(s=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var r=Dr(t);return{partition:r[1],service:r[2],region:r[3],accountId:r[4],resource:r.slice(5).join(":")}}(i),c=Wi,[4,e.region()]):[3,5];case 2:return u=c.apply(void 0,[b.sent()]),[4,e.regionInfoProvider(u)];case 3:return f=b.sent()||{},l=f.partition,d=f.signingRegion,p=void 0===d?u:d,[4,e.useArnRegion()];case 4:return h=b.sent(),v=Yi({bucketName:s,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,useArnRegion:h,clientPartition:l,clientSigningRegion:p}),S=v.hostname,w=v.bucketEndpoint,g=v.signingRegion,m=v.signingService,g&&g!==p&&(r.signing_region=g),m&&"s3"!==m&&(r.signing_service=m),a.hostname=S,o=w,[3,6];case 5:y=Yi({bucketName:i,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol}),S=y.hostname,w=y.bucketEndpoint,a.hostname=S,o=w,b.label=6;case 6:o&&(a.path=a.path.replace(/^(\/)?[^\/]+/,""),""===a.path&&(a.path="/")),b.label=7;case 7:return[2,t(Pr(Pr({},n),{request:a}))]}}))}))}}},ro={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"},no=function(e){return{applyToStack:function(t){t.addRelativeTo(to(e),ro)}}};var io={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,"AWS_S3_USE_ARN_REGION")){if("true"===e.AWS_S3_USE_ARN_REGION)return!0;if("false"===e.AWS_S3_USE_ARN_REGION)return!1;throw new Error('Cannot load env AWS_S3_USE_ARN_REGION. Expected "true" or "false", got '+e.AWS_S3_USE_ARN_REGION+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,"s3_use_arn_region")){if("true"===e.s3_use_arn_region)return!0;if("false"===e.s3_use_arn_region)return!1;throw new Error('Cannot load shared config entry s3_use_arn_region. Expected "true" or "false", got '+e.s3_use_arn_region+".")}},default:!1},oo=function(e){return function(e){return"function"==typeof e}(e)?function(){return jr(void 0,void 0,void 0,(function(){return Ir(this,(function(t){return[2,e()]}))}))}:(t=e,function(){return Promise.resolve(t)});var t},ao=function(e,t){var r,n=e.environmentVariableSelector,i=e.configFileSelector,o=e.default;return void 0===t&&(t={}),Tn(Ln((r=n,function(){return jr(void 0,void 0,void 0,(function(){var e;return Ir(this,(function(t){try{if(void 0===(e=r(process.env)))throw new Error;return[2,e]}catch(e){throw new Cn(e.message||"Cannot load config from environment variables with getter: "+r)}return[2]}))}))}),function(e,t){void 0===t&&(t={});var r=t.preferredFile,n=void 0===r?"config":r,i=_r(t,["preferredFile"]);return function(){return jr(void 0,void 0,void 0,(function(){var t,r,o,a,s,u,c,f,l,d,p;return Ir(this,(function(h){switch(h.label){case 0:return t=i.loadedConfig,r=void 0===t?$n(i):t,o=i.profile,a=void 0===o?process.env.AWS_PROFILE||"default":o,[4,r];case 1:s=h.sent(),u=s.configFile,c=s.credentialsFile,f=c[a]||{},l=u[a]||{},d="config"===n?Pr(Pr({},f),l):Pr(Pr({},l),f);try{if(void 0===(p=e(d)))throw new Error;return[2,p]}catch(t){throw new Cn(t.message||"Cannot load config for profile "+a+" in SDK configuration files with getter: "+e)}return[2]}}))}))}}(i,t),oo(o)))},so=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,uo)},uo=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};var co=function(e){var t,r,n={};try{for(var i=Mr(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];n[a]=Array.isArray(s)?s.join(","):s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n};function fo(e,t){t instanceof n.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var lo=function(){function e(e){var t=void 0===e?{}:e,r=t.connectionTimeout,n=t.socketTimeout,i=t.httpAgent,a=t.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=r,this.socketTimeout=n;this.httpAgent=i||new o.Agent({keepAlive:true}),this.httpsAgent=a||new v.Agent({keepAlive:true})}return e.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},e.prototype.handle=function(e,t){var r=this,n=t.abortSignal;return new Promise((function(t,i){if(null==n?void 0:n.aborted){var a=new Error("Request aborted");return a.name="AbortError",void i(a)}var s="https:"===e.protocol,u=function(e){var t,r,n=[];try{for(var i=Mr(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=so(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)n.push(a+"="+so(s[u]));else{var f=a;(s||"string"==typeof s)&&(f+="="+so(s)),n.push(f)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n.join("&")}(e.query||{}),c={headers:e.headers,host:e.hostname,method:e.method,path:u?e.path+"?"+u:e.path,port:e.port,agent:s?r.httpsAgent:r.httpAgent},f=(s?v.request:o.request)(c,(function(e){var r=new $r({statusCode:e.statusCode||-1,headers:co(e.headers),body:e});t({response:r})}));f.on("error",i),function(e,t,r){void 0===r&&(r=0),r&&e.on("socket",(function(e){var n=this;if(e.connecting){var i=setTimeout((function(){n.abort();var e=new Error("Socket timed out without establishing a connection within "+r+" ms");e.name="TimeoutError",t(e)}),r);e.on("connect",(function(){clearTimeout(i)}))}}))}(f,i,r.connectionTimeout),function(e,t,r){void 0===r&&(r=0),e.setTimeout(r,(function(){this.abort();var e=new Error("Connection timed out after "+r+" ms");e.name="TimeoutError",t(e)}))}(f,i,r.socketTimeout),n&&(n.onabort=function(){f.abort();var e=new Error("Request aborted");e.name="AbortError",i(e)}),function(e,t){"100-continue"===(t.headers.Expect||t.headers.expect)?e.on("continue",(function(){fo(e,t.body)})):fo(e,t.body)}(f,e)}))},e}(),po=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bufferedBytes=[],t}return Nr(t,e),t.prototype._write=function(e,t,r){this.bufferedBytes.push(e),r()},t}(n.Writable);const ho=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),vo=new Set(["cn-north-1","cn-northwest-1"]),go=new Set(["us-iso-east-1"]),mo=new Set(["us-isob-east-1"]),yo=new Set(["us-gov-east-1","us-gov-west-1"]),So={...{apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:(e,t)=>{let r=void 0;switch(e){case"ap-east-1":r={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":r={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":r={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":r={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":r={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":r={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":r={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":r={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":r={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":r={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":r={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":r={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":r={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":r={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":r={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":r={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":r={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":r={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":r={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":r={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":r={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":r={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":r={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":r={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":r={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":r={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:ho.has(e)&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),vo.has(e)&&(r={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),go.has(e)&&(r={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),mo.has(e)&&(r={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),yo.has(e)&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===r&&(r={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(r)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1},runtime:"node",base64Decoder:function(e){var t=Mi(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},base64Encoder:function(e){return Ii(e.buffer,e.byteOffset,e.byteLength).toString("base64")},bodyLengthChecker:function(e){return e?"string"==typeof e?Buffer.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?l.lstatSync(e.path).size:void 0:0},credentialDefaultProvider:function(e){void 0===e&&(e={});var t=e.profile,r=(void 0===t?process.env.AWS_PROFILE:t)?Yn(e):Ln((function(){var e=process.env.AWS_ACCESS_KEY_ID,t=process.env.AWS_SECRET_ACCESS_KEY,r=process.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:process.env.AWS_SESSION_TOKEN,expiration:r?new Date(r):void 0}):Promise.reject(new Cn("Unable to find environment variable credentials."))}),Yn(e),ni(e),function(e){if(process.env[jn]||process.env[_n])return In(e);if(process.env.AWS_EC2_METADATA_DISABLED)return function(){return Promise.reject(new Cn("EC2 Instance Metadata Service access disabled"))};return function(e){void 0===e&&(e={});var t=!1,r=Nn(e),n=r.timeout,i=r.maxRetries,o=function(e,r){return jr(void 0,void 0,void 0,(function(){var n;return Ir(this,(function(i){switch(i.label){case 0:return[4,Pn((function(){return jr(void 0,void 0,void 0,(function(){var e,n;return Ir(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Bn(r)];case 1:return e=i.sent(),[3,3];case 2:throw 401===(n=i.sent()).statusCode&&(t=!1),n;case 3:return[2,e]}}))}))}),e)];case 1:return n=i.sent().trim(),[2,Pn((function(){return jr(void 0,void 0,void 0,(function(){var e,i;return Ir(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Fn(n,r)];case 1:return e=o.sent(),[3,3];case 2:throw 401===(i=o.sent()).statusCode&&(t=!1),i;case 3:return[2,e]}}))}))}),e)]}}))}))};return function(){return jr(void 0,void 0,void 0,(function(){var e,r;return Ir(this,(function(a){switch(a.label){case 0:return t?[2,o(i,{timeout:n})]:[3,1];case 1:e=void 0,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,qn({timeout:n})];case 3:return e=a.sent().toString(),[3,5];case 4:if(400===(null==(r=a.sent())?void 0:r.statusCode))throw Object.assign(r,{message:"EC2 Metadata token request returned error"});return("TimeoutError"===r.message||[403,404,405].includes(r.statusCode))&&(t=!0),[2,o(i,{timeout:n})];case 5:return[2,o(i,{timeout:n,headers:{"x-aws-ec2-metadata-token":e}})]}}))}))}}(e)}(e));return Tn(r,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration}))},defaultUserAgent:(wo=Sn,bo=wn,Eo=T.default.platform+"/"+T.default.version,T.default.env.AWS_EXECUTION_ENV&&(Eo+=" exec-env/"+T.default.env.AWS_EXECUTION_ENV),"aws-sdk-nodejs-v3-"+wo+"/"+bo+" "+Eo),eventStreamSerdeProvider:function(e){return new _i(e)},maxAttempts:ao(hn),md5:Di.bind(null,"md5"),region:ao(xn,{preferredFile:"credentials"}),requestHandler:new lo,sha256:Di.bind(null,"sha256"),streamCollector:function(e){return new Promise((function(t,r){var n=new po;e.pipe(n),e.on("error",(function(e){n.end(),r(e)})),n.on("error",r),n.on("finish",(function(){var e=new Uint8Array(Buffer.concat(this.bufferedBytes));t(e)}))}))},streamHasher:function(e,t){return new Promise((function(r,n){if("string"==typeof t.path){var i=l.createReadStream(t.path,{start:t.start,end:t.end}),o=new e,a=new Ki(o);i.pipe(a),i.on("error",(function(e){a.end(),n(e)})),a.on("error",n),a.on("finish",(function(){o.digest().then(r).catch(n)}))}else n(new Error("Unable to calculate hash for non-file streams."))}))},urlParser:function(e){var t,r=f.parse(e),n=r.hostname,i=void 0===n?"localhost":n,o=r.pathname,a=void 0===o?"/":o,s=r.port,u=r.protocol,c=void 0===u?"https:":u,l=r.search;return l&&(t=function(e){var t,r,n={};if(e=e.replace(/^\?/,""))try{for(var i=Mr(e.split("&")),o=i.next();!o.done;o=i.next()){var a=Dr(o.value.split("="),2),s=a[0],u=a[1],c=void 0===u?null:u;s=decodeURIComponent(s),c&&(c=decodeURIComponent(c)),s in n?Array.isArray(n[s])?n[s].push(c):n[s]=[n[s],c]:n[s]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}(l)),{hostname:i,port:s?parseInt(s):void 0,protocol:c,path:a,query:t}},useArnRegion:ao(io),utf8Decoder:function(e){var t=Mi(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},utf8Encoder:function(e){return Ii(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}};var wo,bo,Eo;var xo={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"},Ao=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return jr(t,void 0,void 0,(function(){var t,i,o,a,s;return Ir(this,(function(u){return t=n.request,Vr.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(a=e(i))&&(t.headers=Pr(Pr({},t.headers),((s={})["content-length"]=String(a),s)))),[2,r(Pr(Pr({},n),{request:t}))]}))}))}}}(e.bodyLengthChecker),xo)}}};var Co={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"},Lo=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return jr(t,void 0,void 0,(function(){var t;return Ir(this,(function(i){return t=n.request,Vr.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=Pr(Pr({},t.headers),{Expect:"100-continue"})),[2,r(Pr(Pr({},n),{request:t}))]}))}))}}}(e),Co)}}};var To={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"]},ko=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(r){return jr(void 0,void 0,void 0,(function(){var n,i;return Ir(this,(function(o){return Vr.isInstance(r.request)?(n=r.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!n.headers[":authority"]?(delete n.headers.host,n.headers[":authority"]=""):n.headers.host||(n.headers.host=n.hostname),[2,t(r)]):[2,t(r)]}))}))}}}(e),To)}}},Oo={name:"loggerMiddleware",tags:["LOGGER"],step:"build"},Ro=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(r){return jr(void 0,void 0,void 0,(function(){var n,i,o;return Ir(this,(function(a){switch(a.label){case 0:return n=t.logger,[4,e(r)];case 1:return i=a.sent(),n?(o=i.output.$metadata,"function"==typeof n.info&&n.info({$metadata:o}),[2,i]):[2,i]}}))}))}}),Oo)}}};var No={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},Po=function(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(r){return jr(e,void 0,void 0,(function(){var e,n;return Ir(this,(function(i){if("string"==typeof(e=r.input.Bucket)&&!Ui(e)&&e.indexOf("/")>=0)throw(n=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",n;return[2,t(Pr({},r))]}))}))}}}(),No)}}},_o={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware"},jo=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(r){return jr(void 0,void 0,void 0,(function(){var n,i;return Ir(this,(function(o){switch(o.label){case 0:return n=r.request,!Vr.isInstance(n)||e.isCustomEndpoint?[2,t(Pr({},r))]:"s3.amazonaws.com"!==n.hostname?[3,1]:(n.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(n.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t(Pr({},r))]}}))}))}}}(e),_o)}}},Io="X-Amz-Date".toLowerCase(),Mo=["authorization",Io,"date"],Do="X-Amz-Signature".toLowerCase(),zo="X-Amz-Security-Token".toLowerCase(),Ko={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Uo=/^proxy-/,qo=/^sec-/,Bo="AWS4-HMAC-SHA256-PAYLOAD",Fo={},Ho=[];function $o(e,t,r){return e+"/"+t+"/"+r+"/aws4_request"}function Vo(e,t,r){var n,i,o=e.headers,a={};try{for(var s=Mr(Object.keys(o).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,f=c.toLowerCase();(f in Ko||(null==t?void 0:t.has(f))||Uo.test(f)||qo.test(f))&&(!r||r&&!r.has(f))||(a[f]=o[c].trim().replace(/\s+/g," "))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}function Wo(e,t){var r=e.headers,n=e.body;return jr(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return Ir(this,(function(f){switch(f.label){case 0:try{for(e=Mr(Object.keys(r)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,r[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=n?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof n||ArrayBuffer.isView(n)||ji(n)?((a=new t).update(n),s=gi,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[f.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function Go(e){var t=e.headers,r=e.query,n=_r(e,["headers","query"]);return Pr(Pr({},n),{headers:Pr({},t),query:r?Jo(r):void 0})}function Jo(e){return Object.keys(e).reduce((function(t,r){var n,i=e[r];return Pr(Pr({},t),((n={})[r]=Array.isArray(i)?zr(i):i,n))}),{})}function Xo(e){var t,r;e="function"==typeof e.clone?e.clone():Go(e);try{for(var n=Mr(Object.keys(e.headers)),i=n.next();!i.done;i=n.next()){var o=i.value;Mo.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return e}function Zo(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var Yo=function(){function e(e){var t=e.applyChecksum,r=e.credentials,n=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=ta(n),this.credentialProvider=ra(r)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),jr(this,void 0,void 0,(function(){var r,n,i,o,a,s,u,c,f,l,d,p,h,v,g,m,y,S,w,b,E,x,A;return Ir(this,(function(C){switch(C.label){case 0:return r=t.signingDate,n=void 0===r?new Date:r,i=t.expiresIn,o=void 0===i?3600:i,a=t.unsignableHeaders,s=t.signableHeaders,u=t.signingRegion,c=t.signingService,[4,this.credentialProvider()];case 1:return f=C.sent(),null==u?[3,2]:(d=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:d=C.sent(),C.label=4;case 4:return l=d,p=Qo(n),h=p.longDate,v=p.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=$o(v,l,null!=c?c:this.service),m=function(e){var t,r,n="function"==typeof e.clone?e.clone():Go(e),i=n.headers,o=n.query,a=void 0===o?{}:o;try{for(var s=Mr(Object.keys(i)),u=s.next();!u.done;u=s.next()){var c=u.value;"x-amz-"===c.toLowerCase().substr(0,6)&&(a[c]=i[c],delete i[c])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return Pr(Pr({},e),{headers:i,query:a})}(Xo(e)),f.sessionToken&&(m.query["X-Amz-Security-Token"]=f.sessionToken),m.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",m.query["X-Amz-Credential"]=f.accessKeyId+"/"+g,m.query["X-Amz-Date"]=h,m.query["X-Amz-Expires"]=o.toString(10),y=Vo(m,a,s),m.query["X-Amz-SignedHeaders"]=ea(y),S=m.query,w="X-Amz-Signature",b=this.getSignature,E=[h,g,this.getSigningKey(f,l,v,c)],x=this.createCanonicalRequest,A=[m,y],[4,Wo(e,this.sha256)]);case 5:return[4,b.apply(this,E.concat([x.apply(this,A.concat([C.sent()]))]))];case 6:return S[w]=C.sent(),[2,m]}}))}))},e.prototype.sign=function(e,t){return jr(this,void 0,void 0,(function(){return Ir(this,(function(r){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var r=e.headers,n=e.payload,i=t.signingDate,o=void 0===i?new Date:i,a=t.priorSignature,s=t.signingRegion,u=t.signingService;return jr(this,void 0,void 0,(function(){var e,t,i,c,f,l,d,p,h,v,g;return Ir(this,(function(m){switch(m.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=m.sent(),m.label=3;case 3:return e=t,i=Qo(o),c=i.shortDate,f=i.longDate,l=$o(c,e,null!=u?u:this.service),[4,Wo({headers:{},body:n},this.sha256)];case 4:return d=m.sent(),(p=new this.sha256).update(r),v=gi,[4,p.digest()];case 5:return h=v.apply(void 0,[m.sent()]),g=[Bo,f,l,a,h,d].join("\n"),[2,this.signString(g,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var r=void 0===t?{}:t,n=r.signingDate,i=void 0===n?new Date:n,o=r.signingRegion,a=r.signingService;return jr(this,void 0,void 0,(function(){var t,r,n,s,u,c,f,l;return Ir(this,(function(d){switch(d.label){case 0:return[4,this.credentialProvider()];case 1:return t=d.sent(),null==o?[3,2]:(n=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:n=d.sent(),d.label=4;case 4:return r=n,s=Qo(i).shortDate,f=(c=this.sha256).bind,[4,this.getSigningKey(t,r,s,a)];case 5:return(u=new(f.apply(c,[void 0,d.sent()]))).update(e),l=gi,[4,u.digest()];case 6:return[2,l.apply(void 0,[d.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var r=void 0===t?{}:t,n=r.signingDate,i=void 0===n?new Date:n,o=r.signableHeaders,a=r.unsignableHeaders,s=r.signingRegion,u=r.signingService;return jr(this,void 0,void 0,(function(){var t,r,n,c,f,l,d,p,h,v,g;return Ir(this,(function(m){switch(m.label){case 0:return[4,this.credentialProvider()];case 1:return t=m.sent(),null==s?[3,2]:(n=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:n=m.sent(),m.label=4;case 4:return r=n,c=Xo(e),f=Qo(i),l=f.longDate,d=f.shortDate,p=$o(d,r,null!=u?u:this.service),c.headers[Io]=l,t.sessionToken&&(c.headers[zo]=t.sessionToken),[4,Wo(c,this.sha256)];case 5:return h=m.sent(),!function(e,t){var r,n;e=e.toLowerCase();try{for(var i=Mr(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=h),v=Vo(c,a,o),[4,this.getSignature(l,p,this.getSigningKey(t,r,d,u),this.createCanonicalRequest(c,v,h))];case 6:return g=m.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+p+", SignedHeaders="+ea(v)+", Signature="+g,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,r){var n=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,r,n=e.query,i=void 0===n?{}:n,o=[],a={},s=function(e){if(e.toLowerCase()===Do)return"continue";o.push(e);var t=i[e];"string"==typeof t?a[e]=so(e)+"="+so(t):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,r){return t.concat([so(e)+"="+so(r)])}),[]).join("&"))};try{for(var u=Mr(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())s(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+n.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+n.join(";")+"\n"+r},e.prototype.createStringToSign=function(e,t,r){return jr(this,void 0,void 0,(function(){var n,i;return Ir(this,(function(o){switch(o.label){case 0:return(n=new this.sha256).update(r),[4,n.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+gi(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,r,n){return jr(this,void 0,void 0,(function(){var i,o,a,s,u;return Ir(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,n)];case 1:return i=c.sent(),s=(a=this.sha256).bind,[4,r];case 2:return(o=new(s.apply(a,[void 0,c.sent()]))).update(i),u=gi,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,r,n){return function(e,t,r,n,i){var o=r+":"+n+":"+i+":"+t.accessKeyId+":"+t.sessionToken;if(o in Fo)return Fo[o];for(Ho.push(o);Ho.length>50;)delete Fo[Ho.shift()];return Fo[o]=new Promise((function(a,s){var u,c,f=Promise.resolve("AWS4"+t.secretAccessKey),l=function(t){(f=f.then((function(r){return n=t,(i=new e(r)).update(n),i.digest();var n,i}))).catch((function(){}))};try{for(var d=Mr([r,n,i,"aws4_request"]),p=d.next();!p.done;p=d.next())l(p.value)}catch(e){u={error:e}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}f.then(a,(function(e){delete Fo[o],s(e)}))}))}(this.sha256,e,r,t,n||this.service)},e}(),Qo=function(e){var t=Zo(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},ea=function(e){return Object.keys(e).sort().join(";")},ta=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},ra=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function na(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}var ia=function(e){return new Date(Date.now()+e)};function oa(e){return function(t,r){return function(n){return jr(this,void 0,void 0,(function(){var i,o,a,s,u,c,f,l,d;return Ir(this,(function(p){switch(p.label){case 0:return Vr.isInstance(n.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(n)];case 1:return o=p.sent(),[3,3];case 2:o=e.signer,p.label=3;case 3:return i=o,s=t,u=[Pr({},n)],d={},[4,i.sign(n.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:r.signing_region,signingService:r.signing_service})];case 4:return[4,s.apply(void 0,[Pr.apply(void 0,u.concat([(d.request=p.sent(),d)]))])];case 5:return a=p.sent(),c=a.response.headers,(f=c&&(c.date||c.Date))&&(l=Date.parse(f),h=l,v=e.systemClockOffset,Math.abs(ia(v).getTime()-h)>=3e5&&(e.systemClockOffset=l-Date.now())),[2,a]}var h,v}))}))}}}var aa={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"};var sa={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},ua=function(e){return{applyToStack:function(t){var r;t.add((r=e,function(e){return function(t){var n=t.request;if(!Vr.isInstance(n))return e(t);var i=n.headers,o="node"===r.runtime?"user-agent":"x-amz-user-agent";return i[o]?i[o]+=" "+r.defaultUserAgent:i[o]=""+r.defaultUserAgent,r.customUserAgent&&(i[o]+=" "+r.customUserAgent),e(Pr(Pr({},t),{request:n}))}}),sa)}}},ca=function(){var e=[],t=[],r=new Set,n=function(r){return e.forEach((function(e){r.add(e.middleware,Pr({},e))})),t.forEach((function(e){r.addRelativeTo(e.middleware,Pr({},e))})),r},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,zr(i(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,zr(i(e)))})),t},o=function(){var r,n=[],o=[],a={};return e.forEach((function(e){var t=Pr(Pr({},e),{before:[],after:[]});t.name&&(a[t.name]=t),n.push(t)})),t.forEach((function(e){var t=Pr(Pr({},e),{before:[],after:[]});t.name&&(a[t.name]=t),o.push(t)})),o.forEach((function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(r=n,r.sort((function(e,t){return fa[t.step]-fa[e.step]||la[t.priority||"normal"]-la[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,zr(t)),e}),[]).map((function(e){return e.middleware}))},a={add:function(t,n){void 0===n&&(n={});var i=n.name,o=Pr({step:"initialize",priority:"normal",middleware:t},n);if(i){if(r.has(i))throw new Error("Duplicate middleware name '"+i+"'");r.add(i)}e.push(o)},addRelativeTo:function(e,n){var i=n.name,o=Pr({middleware:e},n);if(i){if(r.has(i))throw new Error("Duplicated middleware name '"+i+"'");r.add(i)}t.push(o)},clone:function(){return n(ca())},use:function(e){e.applyToStack(a)},remove:function(n){return"string"==typeof n?function(n){var i=!1,o=function(e){return!e.name||e.name!==n||(i=!0,r.delete(n),!1)};return e=e.filter(o),t=t.filter(o),i}(n):function(n){var i=!1,o=function(e){return e.middleware!==n||(i=!0,e.name&&r.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(n)},removeByTag:function(n){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(n)||(o&&r.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=n(ca());return t.use(e),t},applyToStack:n,resolve:function(e,t){var r,n;try{for(var i=Mr(o().reverse()),a=i.next();!a.done;a=i.next()){e=(0,a.value)(e,t)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return e}};return a},fa={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},la={high:3,normal:2,low:1},da=function(){function e(e){this.middlewareStack=ca(),this.config=e}return e.prototype.send=function(e,t,r){var n="function"!=typeof t?t:void 0,i="function"==typeof t?t:r,o=e.resolveMiddleware(this.middlewareStack,this.config,n);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),pa=function(){this.middlewareStack=ca()};function ha(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var va=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=va(e[t]));return e},ga=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,zr([null],arguments)),r=new t;return Object.setPrototypeOf(r,e.prototype),r};ga.prototype=Object.create(String.prototype,{constructor:{value:ga,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ga,String);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Nr(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(ga);var ma=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ya=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Sa(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds();return ma[n]+", "+(i<10?"0"+i:""+i)+" "+ya[r]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(a<10?"0"+a:""+a)+":"+(s<10?"0"+s:""+s)+" GMT"}var wa="***SensitiveInformation***";var ba,Ea,xa,Aa,Ca,La,Ta,ka,Oa,Ra,Na,Pa,_a,ja,Ia,Ma,Da,za,Ka,Ua,qa,Ba,Fa,Ha,$a,Va,Wa,Ga,Ja,Xa,Za,Ya,Qa,es,ts,rs,ns,is,os,as,ss,us,cs,fs,ls,ds,ps,hs,vs,gs,ms,ys,Ss,ws,bs,Es,xs,As,Cs,Ls,Ts,ks,Os,Rs,Ns,Ps,_s,js,Is,Ms,Ds,zs,Ks,Us,qs,Bs,Fs,Hs,$s,Vs,Ws,Gs,Js,Xs,Zs,Ys,Qs,eu,tu,ru,nu,iu,ou,au,su,uu,cu,fu,lu,du,pu,hu,vu,gu,mu,yu,Su,wu,bu,Eu,xu,Au,Cu,Lu,Tu,ku,Ou,Ru,Nu,Pu,_u,ju,Iu,Mu,Du,zu,Ku,Uu,qu,Bu,Fu,Hu,$u,Vu,Wu,Gu,Ju,Xu,Zu,Yu,Qu,ec,tc,rc,nc,ic,oc,ac,sc,uc,cc,fc,lc,dc,pc,hc,vc,gc,mc,yc,Sc,wc,bc,Ec,xc,Ac,Cc,Lc,Tc,kc,Oc,Rc,Nc,Pc,_c,jc,Ic,Mc,Dc,zc,Kc,Uc,qc,Bc,Fc,Hc,$c,Vc,Wc,Gc,Jc,Xc,Zc,Yc,Qc,ef,tf,rf,nf,of,af,sf,uf,cf,ff,lf,df,pf,hf,vf,gf,mf,yf,Sf,wf,bf,Ef,xf,Af,Cf,Lf,Tf,kf,Of,Rf,Nf,Pf,_f,jf,If,Mf,Df,zf,Kf,Uf,qf,Bf,Ff,Hf,$f,Vf,Wf,Gf,Jf,Xf,Zf,Yf,Qf,el,tl,rl,nl,il,ol=Object.freeze({__proto__:null,S3Client:class extends da{constructor(e){let t=function(e){if(!e.region)throw new Error("Region is missing");return Pr(Pr({},e),{region:An(e.region)})}({...So,...e});var r,n;let i=function(e){var t,r=this,n=na(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,a=e.systemClockOffset,s=void 0===a?e.systemClockOffset||0:a,u=e.sha256;return t=e.signer?na(e.signer):function(){return na(e.region)().then((function(t){return jr(r,void 0,void 0,(function(){return Ir(this,(function(r){switch(r.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[r.sent()||{},t]]}}))}))})).then((function(t){var r=Dr(t,2),i=r[0],a=r[1],s=i.signingRegion,c=void 0===s?e.signingRegion:s,f=i.signingService,l=void 0===f?e.signingName:f;return e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||l,new Yo({credentials:n,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:o})}))},Pr(Pr({},e),{systemClockOffset:s,signingEscapePath:o,credentials:n,signer:t})}(Pr(Pr({},r=t),{tls:null===(n=r.tls)||void 0===n||n,endpoint:r.endpoint?bn(r):function(){return En(r)},isCustomEndpoint:!!r.endpoint})),o=function(e){return Pr(Pr({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(function(e){var t=e.bucketEndpoint,r=void 0!==t&&t,n=e.forcePathStyle,i=void 0!==n&&n,o=e.useAccelerateEndpoint,a=void 0!==o&&o,s=e.useDualstackEndpoint,u=void 0!==s&&s,c=e.useArnRegion,f=void 0!==c&&c;return Pr(Pr({},e),{bucketEndpoint:r,forcePathStyle:i,useAccelerateEndpoint:a,useDualstackEndpoint:u,useArnRegion:"function"==typeof f?f:function(){return Promise.resolve(f)}})}(vn(i)));var a;super(o),this.config=o,this.middlewareStack.use((a=this.config,{applyToStack:function(e){e.addRelativeTo(oa(a),aa)}})),this.middlewareStack.use(Hr(this.config)),this.middlewareStack.use(ua(this.config)),this.middlewareStack.use(Ao(this.config)),this.middlewareStack.use(Po(this.config)),this.middlewareStack.use(jo(this.config)),this.middlewareStack.use(Lo(this.config)),this.middlewareStack.use(ko(this.config)),this.middlewareStack.use(Ro(this.config))}destroy(){super.destroy()}}});!function(e){e.filterSensitiveLog=e=>({...e})}(ba||(ba={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ea||(Ea={})),function(e){e.filterSensitiveLog=e=>({...e})}(xa||(xa={})),function(e){e.filterSensitiveLog=e=>({...e})}(Aa||(Aa={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ca||(Ca={})),function(e){e.filterSensitiveLog=e=>({...e})}(La||(La={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ta||(Ta={})),function(e){e.filterSensitiveLog=e=>({...e})}(ka||(ka={})),function(e){e.filterSensitiveLog=e=>({...e})}(Oa||(Oa={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ra||(Ra={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(Na||(Na={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pa||(Pa={})),function(e){e.filterSensitiveLog=e=>({...e})}(_a||(_a={})),function(e){e.filterSensitiveLog=e=>({...e})}(ja||(ja={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ia||(Ia={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wa},...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(Ma||(Ma={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wa},...e.SSECustomerKey&&{SSECustomerKey:wa},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:wa},...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(Da||(Da={})),function(e){e.filterSensitiveLog=e=>({...e})}(za||(za={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ka||(Ka={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ua||(Ua={})),function(e){e.filterSensitiveLog=e=>({...e})}(qa||(qa={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ba||(Ba={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fa||(Fa={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wa},...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(Ha||(Ha={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:wa},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wa},...e.SSECustomerKey&&{SSECustomerKey:wa}})}($a||($a={})),function(e){e.filterSensitiveLog=e=>({...e})}(Va||(Va={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wa||(Wa={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ga||(Ga={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ja||(Ja={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xa||(Xa={})),function(e){e.filterSensitiveLog=e=>({...e})}(Za||(Za={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ya||(Ya={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qa||(Qa={})),function(e){e.filterSensitiveLog=e=>({...e})}(es||(es={})),function(e){e.filterSensitiveLog=e=>({...e})}(ts||(ts={})),function(e){e.filterSensitiveLog=e=>({...e})}(rs||(rs={})),function(e){e.filterSensitiveLog=e=>({...e})}(ns||(ns={})),function(e){e.filterSensitiveLog=e=>({...e})}(is||(is={})),function(e){e.filterSensitiveLog=e=>({...e})}(os||(os={})),function(e){e.filterSensitiveLog=e=>({...e})}(as||(as={})),function(e){e.filterSensitiveLog=e=>({...e})}(ss||(ss={})),function(e){e.filterSensitiveLog=e=>({...e})}(us||(us={})),function(e){e.filterSensitiveLog=e=>({...e})}(cs||(cs={})),function(e){e.filterSensitiveLog=e=>({...e})}(fs||(fs={})),function(e){e.filterSensitiveLog=e=>({...e})}(ls||(ls={})),function(e){e.filterSensitiveLog=e=>({...e})}(ds||(ds={})),function(e){e.filterSensitiveLog=e=>({...e})}(ps||(ps={})),function(e){e.filterSensitiveLog=e=>({...e})}(hs||(hs={})),function(e){e.filterSensitiveLog=e=>({...e})}(vs||(vs={})),function(e){e.filterSensitiveLog=e=>({...e})}(gs||(gs={})),function(e){e.filterSensitiveLog=e=>({...e})}(ms||(ms={})),function(e){e.filterSensitiveLog=e=>({...e})}(ys||(ys={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ss||(Ss={})),function(e){e.filterSensitiveLog=e=>({...e})}(ws||(ws={})),function(e){e.filterSensitiveLog=e=>({...e})}(bs||(bs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Es||(Es={})),function(e){e.filterSensitiveLog=e=>({...e})}(xs||(xs={})),function(e){e.filterSensitiveLog=e=>({...e})}(As||(As={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cs||(Cs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ls||(Ls={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ts||(Ts={})),function(e){e.filterSensitiveLog=e=>({...e})}(ks||(ks={})),function(e){e.filterSensitiveLog=e=>({...e})}(Os||(Os={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rs||(Rs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ns||(Ns={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KMSMasterKeyID&&{KMSMasterKeyID:wa}})}(Ps||(Ps={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Ps.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)}})}(_s||(_s={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>_s.filterSensitiveLog(e)))}})}(js||(js={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:js.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(Is||(Is={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ms||(Ms={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KeyId&&{KeyId:wa}})}(Ds||(Ds={})),function(e){e.filterSensitiveLog=e=>({...e})}(zs||(zs={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMS&&{SSEKMS:Ds.filterSensitiveLog(e.SSEKMS)}})}(Ks||(Ks={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Encryption&&{Encryption:Ks.filterSensitiveLog(e.Encryption)}})}(Us||(Us={})),function(e){e.filterSensitiveLog=e=>({...e,...e.S3BucketDestination&&{S3BucketDestination:Us.filterSensitiveLog(e.S3BucketDestination)}})}(qs||(qs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bs||(Bs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fs||(Fs={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Destination&&{Destination:qs.filterSensitiveLog(e.Destination)}})}(Hs||(Hs={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:Hs.filterSensitiveLog(e.InventoryConfiguration)}})}($s||($s={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vs||(Vs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ws||(Ws={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gs||(Gs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Js||(Js={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xs||(Xs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zs||(Zs={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ys||(Ys={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qs||(Qs={})),function(e){e.filterSensitiveLog=e=>({...e})}(eu||(eu={})),function(e){e.filterSensitiveLog=e=>({...e})}(tu||(tu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ru||(ru={})),function(e){e.filterSensitiveLog=e=>({...e})}(nu||(nu={})),function(e){e.filterSensitiveLog=e=>({...e})}(iu||(iu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ou||(ou={})),function(e){e.filterSensitiveLog=e=>({...e})}(au||(au={})),function(e){e.filterSensitiveLog=e=>({...e})}(su||(su={})),function(e){e.filterSensitiveLog=e=>({...e})}(uu||(uu={})),function(e){e.filterSensitiveLog=e=>({...e})}(cu||(cu={})),function(e){e.filterSensitiveLog=e=>({...e})}(fu||(fu={})),function(e){e.filterSensitiveLog=e=>({...e})}(lu||(lu={})),function(e){e.filterSensitiveLog=e=>({...e})}(du||(du={})),function(e){e.filterSensitiveLog=e=>({...e})}(pu||(pu={})),function(e){e.filterSensitiveLog=e=>({...e})}(hu||(hu={})),function(e){e.filterSensitiveLog=e=>({...e})}(vu||(vu={})),function(e){e.filterSensitiveLog=e=>({...e})}(gu||(gu={})),function(e){e.filterSensitiveLog=e=>({...e})}(mu||(mu={})),function(e){e.filterSensitiveLog=e=>({...e})}(yu||(yu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Su||(Su={})),function(e){e.filterSensitiveLog=e=>({...e})}(wu||(wu={})),function(e){e.filterSensitiveLog=e=>({...e})}(bu||(bu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Eu||(Eu={})),function(e){e.filterSensitiveLog=e=>({...e})}(xu||(xu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Au||(Au={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cu||(Cu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lu||(Lu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tu||(Tu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ku||(ku={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ou||(Ou={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ru||(Ru={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nu||(Nu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pu||(Pu={})),function(e){e.filterSensitiveLog=e=>({...e})}(_u||(_u={})),function(e){e.filterSensitiveLog=e=>({...e})}(ju||(ju={})),function(e){e.filterSensitiveLog=e=>({...e})}(Iu||(Iu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mu||(Mu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Du||(Du={})),function(e){e.filterSensitiveLog=e=>({...e})}(zu||(zu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ku||(Ku={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uu||(Uu={})),function(e){e.filterSensitiveLog=e=>({...e})}(qu||(qu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bu||(Bu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fu||(Fu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hu||(Hu={})),function(e){e.filterSensitiveLog=e=>({...e})}($u||($u={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vu||(Vu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wu||(Wu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gu||(Gu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ju||(Ju={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xu||(Xu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zu||(Zu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yu||(Yu={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qu||(Qu={})),function(e){e.filterSensitiveLog=e=>({...e})}(ec||(ec={})),function(e){e.filterSensitiveLog=e=>({...e})}(tc||(tc={})),function(e){e.filterSensitiveLog=e=>({...e})}(rc||(rc={})),function(e){e.filterSensitiveLog=e=>({...e})}(nc||(nc={})),function(e){e.filterSensitiveLog=e=>({...e})}(ic||(ic={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(oc||(oc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:wa}})}(ac||(ac={})),function(e){e.filterSensitiveLog=e=>({...e})}(sc||(sc={})),function(e){e.filterSensitiveLog=e=>({...e})}(uc||(uc={})),function(e){e.filterSensitiveLog=e=>({...e})}(cc||(cc={})),function(e){e.filterSensitiveLog=e=>({...e})}(fc||(fc={})),function(e){e.filterSensitiveLog=e=>({...e})}(lc||(lc={})),function(e){e.filterSensitiveLog=e=>({...e})}(dc||(dc={})),function(e){e.filterSensitiveLog=e=>({...e})}(pc||(pc={})),function(e){e.filterSensitiveLog=e=>({...e})}(hc||(hc={})),function(e){e.filterSensitiveLog=e=>({...e})}(vc||(vc={})),function(e){e.filterSensitiveLog=e=>({...e})}(gc||(gc={})),function(e){e.filterSensitiveLog=e=>({...e})}(mc||(mc={})),function(e){e.filterSensitiveLog=e=>({...e})}(yc||(yc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sc||(Sc={})),function(e){e.filterSensitiveLog=e=>({...e})}(wc||(wc={})),function(e){e.filterSensitiveLog=e=>({...e})}(bc||(bc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ec||(Ec={})),function(e){e.filterSensitiveLog=e=>({...e})}(xc||(xc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ac||(Ac={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cc||(Cc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lc||(Lc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tc||(Tc={})),function(e){e.filterSensitiveLog=e=>({...e})}(kc||(kc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Oc||(Oc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(Rc||(Rc={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:wa}})}(Nc||(Nc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pc||(Pc={})),function(e){e.filterSensitiveLog=e=>({...e})}(_c||(_c={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((e=>Hs.filterSensitiveLog(e)))}})}(jc||(jc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ic||(Ic={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mc||(Mc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Dc||(Dc={})),function(e){e.filterSensitiveLog=e=>({...e})}(zc||(zc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kc||(Kc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uc||(Uc={})),function(e){e.filterSensitiveLog=e=>({...e})}(qc||(qc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bc||(Bc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fc||(Fc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hc||(Hc={})),function(e){e.filterSensitiveLog=e=>({...e})}($c||($c={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vc||(Vc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wc||(Wc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gc||(Gc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jc||(Jc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xc||(Xc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zc||(Zc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yc||(Yc={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qc||(Qc={})),function(e){e.filterSensitiveLog=e=>({...e})}(ef||(ef={})),function(e){e.filterSensitiveLog=e=>({...e})}(tf||(tf={})),function(e){e.filterSensitiveLog=e=>({...e})}(rf||(rf={})),function(e){e.filterSensitiveLog=e=>({...e})}(nf||(nf={})),function(e){e.filterSensitiveLog=e=>({...e})}(of||(of={})),function(e){e.filterSensitiveLog=e=>({...e})}(af||(af={})),function(e){e.filterSensitiveLog=e=>({...e})}(sf||(sf={})),function(e){e.filterSensitiveLog=e=>({...e})}(uf||(uf={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:js.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(cf||(cf={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:Hs.filterSensitiveLog(e.InventoryConfiguration)}})}(ff||(ff={})),function(e){e.filterSensitiveLog=e=>({...e})}(lf||(lf={})),function(e){e.filterSensitiveLog=e=>({...e})}(df||(df={})),function(e){e.filterSensitiveLog=e=>({...e})}(pf||(pf={})),function(e){e.filterSensitiveLog=e=>({...e})}(hf||(hf={})),function(e){e.filterSensitiveLog=e=>({...e})}(vf||(vf={})),function(e){e.filterSensitiveLog=e=>({...e})}(gf||(gf={})),function(e){e.filterSensitiveLog=e=>({...e})}(mf||(mf={})),function(e){e.filterSensitiveLog=e=>({...e})}(yf||(yf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sf||(Sf={})),function(e){e.filterSensitiveLog=e=>({...e})}(wf||(wf={})),function(e){e.filterSensitiveLog=e=>({...e})}(bf||(bf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ef||(Ef={})),function(e){e.filterSensitiveLog=e=>({...e})}(xf||(xf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Af||(Af={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cf||(Cf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lf||(Lf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tf||(Tf={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wa},...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(kf||(kf={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:wa},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:wa},...e.SSEKMSKeyId&&{SSEKMSKeyId:wa}})}(Of||(Of={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rf||(Rf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nf||(Nf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pf||(Pf={})),function(e){e.filterSensitiveLog=e=>({...e})}(_f||(_f={})),function(e){e.filterSensitiveLog=e=>({...e})}(jf||(jf={})),function(e){e.filterSensitiveLog=e=>({...e})}(If||(If={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mf||(Mf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Df||(Df={})),function(e){e.filterSensitiveLog=e=>({...e})}(zf||(zf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kf||(Kf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Uf||(Uf={})),function(e){e.filterSensitiveLog=e=>({...e})}(qf||(qf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bf||(Bf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ff||(Ff={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KMSKeyId&&{KMSKeyId:wa}})}(Hf||(Hf={})),function(e){e.filterSensitiveLog=e=>({...e})}($f||($f={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Encryption&&{Encryption:Hf.filterSensitiveLog(e.Encryption)}})}(Vf||(Vf={})),function(e){e.filterSensitiveLog=e=>({...e,...e.S3&&{S3:Vf.filterSensitiveLog(e.S3)}})}(Wf||(Wf={})),function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(Gf||(Gf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jf||(Jf={})),function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(Xf||(Xf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zf||(Zf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yf||(Yf={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qf||(Qf={})),function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(el||(el={})),function(e){e.filterSensitiveLog=e=>({...e})}(tl||(tl={})),function(e){e.filterSensitiveLog=e=>({...e})}(rl||(rl={})),function(e){e.filterSensitiveLog=e=>({...e})}(nl||(nl={})),function(e){e.filterSensitiveLog=e=>({...e})}(il||(il={}));var al=q((function(e,t){const r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t){const n=Object.keys(t),i=n.length;for(let o=0;o<i;o++)e[n[o]]="strict"===r?[t[n[o]]]:t[n[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,r){var n={};if(!e)return t;for(let i=0;i<r.length;i++)void 0!==e[r[i]]?n[r[i]]=e[r[i]]:n[r[i]]=t[r[i]];return n},t.isName=function(e){const t=i.exec(e);return!(null==t)},t.getAllMatches=function(e,t){const r=[];let n=t.exec(e);for(;n;){const i=[],o=n.length;for(let e=0;e<o;e++)i.push(n[e]);r.push(i),n=t.exec(e)}return r},t.nameRegexp=n}));const sl=function(e,t){const r={};if(!(e.child&&!al.isEmptyObject(e.child)||e.attrsMap&&!al.isEmptyObject(e.attrsMap)))return al.isExist(e.val)?e.val:"";al.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&("strict"===t.arrayMode?r[t.textNodeName]=[e.val]:r[t.textNodeName]=e.val),al.merge(r,e.attrsMap,t.arrayMode);const n=Object.keys(e.child);for(let a=0;a<n.length;a++){var i=n[a];if(e.child[i]&&e.child[i].length>1)for(var o in r[i]=[],e.child[i])r[i].push(sl(e.child[i][o],t));else if(!0===t.arrayMode){const n=sl(e.child[i][0],t);r[i]="object"==typeof n?[n]:n}else"strict"===t.arrayMode?r[i]=[sl(e.child[i][0],t)]:r[i]=sl(e.child[i][0],t)}return r};var ul={convertToJson:sl},cl=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}};const fl=al.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,al.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const ll={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};var dl=ll;const pl=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var hl=pl;function vl(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=ml(t=r.tagValueProcessor(t,e),r.parseNodeValue,r.parseTrueNumberOnly)),t}function gl(e,t){if(t.ignoreNameSpace){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}function ml(e,t,r){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),r&&(t=String(t)===e?t:e)),t}return al.isExist(e)?e:""}const yl=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function Sl(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const r=al.getAllMatches(e,yl),n=r.length,i={};for(let e=0;e<n;e++){const n=gl(r[e][1],t);n.length&&(void 0!==r[e][4]?(t.trimValues&&(r[e][4]=r[e][4].trim()),r[e][4]=t.attrValueProcessor(r[e][4],n),i[t.attributeNamePrefix+n]=ml(r[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+n]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=i,e}return i}}function wl(e,t){let r,n="";for(let i=t;i<e.length;i++){let t=e[i];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else{if(">"===t)return{data:n,index:i};"\t"===t&&(t=" ")}n+=t}}function bl(e,t,r,n){const i=e.indexOf(t,r);if(-1===i)throw new Error(n);return i+t.length-1}var El={defaultOptions:dl,props:hl,getTraversalObj:function(e,t){e=e.replace(/(\r\n)|\n/," "),t=fl(t,ll,pl);const r=new cl("!xml");let n=r,i="";for(let r=0;r<e.length;r++){if("<"===e[r])if("/"===e[r+1]){const o=bl(e,">",r,"Closing Tag is not closed.");let a=e.substring(r+2,o).trim();if(t.ignoreNameSpace){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}n&&(n.val?n.val=al.getValue(n.val)+""+vl(a,i,t):n.val=vl(a,i,t)),t.stopNodes.length&&t.stopNodes.includes(n.tagname)&&(n.child=[],null==n.attrsMap&&(n.attrsMap={}),n.val=e.substr(n.startIndex+1,r-n.startIndex-1)),n=n.parent,i="",r=o}else if("?"===e[r+1])r=bl(e,"?>",r,"Pi Tag is not closed.");else if("!--"===e.substr(r+1,3))r=bl(e,"--\x3e",r,"Comment is not closed.");else if("!D"===e.substr(r+1,2)){const t=bl(e,">",r,"DOCTYPE is not closed.");r=e.substring(r,t).indexOf("[")>=0?e.indexOf("]>",r)+1:t}else if("!["===e.substr(r+1,2)){const o=bl(e,"]]>",r,"CDATA is not closed.")-2,a=e.substring(r+9,o);if(i&&(n.val=al.getValue(n.val)+""+vl(n.tagname,i,t),i=""),t.cdataTagName){const e=new cl(t.cdataTagName,n,a);n.addChild(e),n.val=al.getValue(n.val)+t.cdataPositionChar,a&&(e.val=a)}else n.val=(n.val||"")+(a||"");r=o+2}else{const o=wl(e,r+1);let a=o.data;const s=o.index,u=a.indexOf(" ");let c=a;if(-1!==u&&(c=a.substr(0,u).trimRight(),a=a.substr(u+1)),t.ignoreNameSpace){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1))}if(n&&i&&"!xml"!==n.tagname&&(n.val=al.getValue(n.val)+""+vl(n.tagname,i,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),a=c):a=a.substr(0,a.length-1);const e=new cl(c,n,"");c!==a&&(e.attrsMap=Sl(a,t)),n.addChild(e)}else{const e=new cl(c,n);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=s),c!==a&&(e.attrsMap=Sl(a,t)),n.addChild(e),n=e}i="",r=s}else i+=e[r]}return r}};const xl={allowBooleanAttributes:!1},Al=["allowBooleanAttributes"];function Cl(e,t){for(var r=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var n=e.substr(r,t-r);if(t>5&&"xml"===n)return Nl("InvalidXml","XML declaration allowed only at the start of the document.",_l(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function Ll(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function Tl(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===n)n=e[t];else{if(n!==e[t])continue;n=""}else if(">"===e[t]&&""===n){i=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:i}}const kl=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function Ol(e,t){const r=al.getAllMatches(e,kl),n={};for(let i=0;i<r.length;i++){if(0===r[i][1].length)return Nl("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",jl(e,r[i][0]));if(void 0===r[i][3]&&!t.allowBooleanAttributes)return Nl("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",jl(e,r[i][0]));const o=r[i][2];if(!Pl(o))return Nl("InvalidAttr","Attribute '"+o+"' is an invalid name.",jl(e,r[i][0]));if(n.hasOwnProperty(o))return Nl("InvalidAttr","Attribute '"+o+"' is repeated.",jl(e,r[i][0]));n[o]=1}return!0}function Rl(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function Nl(e,t,r){return{err:{code:e,msg:t,line:r}}}function Pl(e){return al.isName(e)}function _l(e,t){return e.substring(0,t).split(/\r?\n/).length}function jl(e,t){return e.indexOf(t)+t.length}var Il=function(e,t){t=al.buildOptions(t,xl,Al);const r=[];let n=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let a=0;a<e.length;a++){if("<"!==e[a]){if(" "===e[a]||"\t"===e[a]||"\n"===e[a]||"\r"===e[a])continue;return Nl("InvalidChar","char '"+e[a]+"' is not expected.",_l(e,a))}if(a++,"?"===e[a]){if(a=Cl(e,++a),a.err)return a}else{if("!"===e[a]){a=Ll(e,a);continue}{let s=!1;"/"===e[a]&&(s=!0,a++);let u="";for(;a<e.length&&">"!==e[a]&&" "!==e[a]&&"\t"!==e[a]&&"\n"!==e[a]&&"\r"!==e[a];a++)u+=e[a];if(u=u.trim(),"/"===u[u.length-1]&&(u=u.substring(0,u.length-1),a--),o=u,!al.isName(o)){let t;return t=0===u.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+u+"' is an invalid name.",Nl("InvalidTag",t,_l(e,a))}const c=Tl(e,a);if(!1===c)return Nl("InvalidAttr","Attributes for '"+u+"' have open quote.",_l(e,a));let f=c.value;if(a=c.index,"/"===f[f.length-1]){f=f.substring(0,f.length-1);const r=Ol(f,t);if(!0!==r)return Nl(r.err.code,r.err.msg,_l(e,a-f.length+r.err.line));n=!0}else if(s){if(!c.tagClosed)return Nl("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",_l(e,a));if(f.trim().length>0)return Nl("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",_l(e,a));{const t=r.pop();if(u!==t)return Nl("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+u+"'.",_l(e,a));0==r.length&&(i=!0)}}else{const o=Ol(f,t);if(!0!==o)return Nl(o.err.code,o.err.msg,_l(e,a-f.length+o.err.line));if(!0===i)return Nl("InvalidXml","Multiple possible root nodes found.",_l(e,a));r.push(u),n=!0}for(a++;a<e.length;a++){if("<"===e[a]){if("!"===e[a+1]){a++,a=Ll(e,a);continue}break}if("&"===e[a]){const t=Rl(e,a);if(-1==t)return Nl("InvalidChar","char '&' is not expected.",_l(e,a));a=t}}"<"===e[a]&&a--}}}var o;return n?!(r.length>0)||Nl("InvalidXml","Invalid '"+JSON.stringify(r,null,4).replace(/\r?\n/g,"")+"' found.",1):Nl("InvalidXml","Start tag expected.",1)};const Ml=function(e){return String.fromCharCode(e)},Dl={nilChar:Ml(176),missingChar:Ml(201),nilPremitive:Ml(175),missingPremitive:Ml(200),emptyChar:Ml(178),emptyValue:Ml(177),boundryChar:Ml(179),objStart:Ml(198),arrStart:Ml(204),arrayEnd:Ml(185)},zl=[Dl.nilChar,Dl.nilPremitive,Dl.missingChar,Dl.missingPremitive,Dl.boundryChar,Dl.emptyChar,Dl.emptyValue,Dl.arrayEnd,Dl.objStart,Dl.arrStart],Kl=function(e,t,r){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?Ul(e[0].val):Ul(e);{const i=void 0===(n=e)?Dl.missingChar:null===n?Dl.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||Dl.emptyChar;if(!0===i){let n="";if(Array.isArray(t)){n+=Dl.arrStart;const i=t[0],o=e.length;if("string"==typeof i)for(let t=0;t<o;t++){const r=Ul(e[t].val);n=ql(n,r)}else for(let t=0;t<o;t++){const o=Kl(e[t],i,r);n=ql(n,o)}n+=Dl.arrayEnd}else{n+=Dl.objStart;const i=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in i){const a=i[o];let s;s=!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?Kl(e.attrsMap[a],t[a],r):a===r.textNodeName?Kl(e.val,t[a],r):Kl(e.child[a],t[a],r),n=ql(n,s)}}return n}return i}var n},Ul=function(e){switch(e){case void 0:return Dl.missingPremitive;case null:return Dl.nilPremitive;case"":return Dl.emptyValue;default:return e}},ql=function(e,t){return Bl(t[0])||Bl(e[e.length-1])||(e+=Dl.boundryChar),e+t},Bl=function(e){return-1!==zl.indexOf(e)};const Fl=al.buildOptions;var Hl={convert2nimn:function(e,t,r){return r=Fl(r,El.defaultOptions,El.props),Kl(e,t,r)}};const $l=al.buildOptions,Vl=function(e,t,r){let n="{";const i=Object.keys(e.child);for(let r=0;r<i.length;r++){var o=i[r];if(e.child[o]&&e.child[o].length>1){for(var a in n+='"'+o+'" : [ ',e.child[o])n+=Vl(e.child[o][a],t)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+o+'" : '+Vl(e.child[o][0],t)+" ,"}return al.merge(n,e.attrsMap),al.isEmptyObject(n)?al.isExist(e.val)?e.val:"":(al.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(n+='"'+t.textNodeName+'" : '+(!0!==(s=e.val)&&!1!==s&&isNaN(s)?'"'+s+'"':s)),","===n[n.length-1]&&(n=n.substr(0,n.length-2)),n+"}");var s};var Wl={convertToJsonString:function(e,t){return(t=$l(t,El.defaultOptions,El.props)).indentBy=t.indentBy||"",Vl(e,t)}};const Gl=al.buildOptions,Jl={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},Xl=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function Zl(e){this.options=Gl(e,Jl,Xl),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=od),this.options.cdataTagName?this.isCDATA=ad:this.isCDATA=function(){return!1},this.replaceCDATAstr=Yl,this.replaceCDATAarr=Ql,this.options.format?(this.indentate=id,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=nd,this.buildObjNode=td):(this.buildTextNode=rd,this.buildObjNode=ed),this.buildTextValNode=rd,this.buildObjectNode=ed}function Yl(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function Ql(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[r]+"]]>");return e+this.newLine}function ed(e,t,r,n){return r&&!e.includes("<")?this.indentate(n)+"<"+t+r+">"+e+"</"+t+this.tagEndChar:this.indentate(n)+"<"+t+r+this.tagEndChar+e+this.indentate(n)+"</"+t+this.tagEndChar}function td(e,t,r,n){return""!==e?this.buildObjectNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function rd(e,t,r,n){return this.indentate(n)+"<"+t+r+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function nd(e,t,r,n){return""!==e?this.buildTextValNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function id(e){return this.options.indentBy.repeat(e)}function od(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function ad(e){return e===this.options.cdataTagName}Zl.prototype.parse=function(e){return this.j2x(e,0).val},Zl.prototype.j2x=function(e,t){let r="",n="";const i=Object.keys(e),o=i.length;for(let a=0;a<o;a++){const o=i[a];if(void 0===e[o]);else if(null===e[o])n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?r+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?n+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):n+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+e[o])):n+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))n+=this.indentate(t),e[this.options.textNodeName]?n+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):n+=this.replaceCDATAarr("",e[o]);else{const r=e[o].length;for(let i=0;i<r;i++){const r=e[o][i];if(void 0===r);else if(null===r)n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof r){const e=this.j2x(r,t+1);n+=this.buildObjNode(e.val,o,e.attrStr,t)}else n+=this.buildTextNode(r,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),n=t.length;for(let i=0;i<n;i++)r+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const r=this.j2x(e[o],t+1);n+=this.buildObjNode(r.val,o,r.attrStr,t)}}return{attrStr:r,val:n}};var sd=Zl,ud=q((function(e,t){const r=El,n=al.buildOptions;t.parse=function(e,t,i){if(i){!0===i&&(i={});const t=Il(e,i);if(!0!==t)throw Error(t.err.msg)}t=n(t,r.defaultOptions,r.props);const o=El.getTraversalObj(e,t);return ul.convertToJson(o,t)},t.convertTonimn=Hl.convert2nimn,t.getTraversalObj=El.getTraversalObj,t.convertToJson=ul.convertToJson,t.convertToJsonString=Wl.convertToJsonString,t.validate=Il,t.j2xParser=sd,t.parseToNimn=function(e,r,n){return t.convertTonimn(t.getTraversalObj(e,n),r,n)}}));const cd=async(e,t)=>{const r={...e,body:await vd(e.body,t)};let n,i="UnknownError";switch(i=gd(e,r.body),i){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":n={...await ld(r),name:i,$metadata:dd(e)};break;default:const t=r.body;i=t.code||t.Code||i,n={...t,name:""+i,message:t.message||t.Message||i,$fault:"client",$metadata:dd(e)}}const o=n.message||n.Message||i;return n.message=o,delete n.Message,Promise.reject(Object.assign(new Error(o),n))},fd=async(e,t)=>{const r={...e,body:await vd(e.body,t)};let n,i="UnknownError";i=gd(e,r.body);{const t=r.body;i=t.code||t.Code||i,n={...t,name:""+i,message:t.message||t.Message||i,$fault:"client",$metadata:dd(e)}}const o=n.message||n.Message||i;return n.message=o,delete n.Message,Promise.reject(Object.assign(new Error(o),n))},ld=async(e,t)=>{const r={name:"NoSuchKey",$fault:"client",$metadata:dd(e)};e.body;return r},dd=e=>({httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}),pd=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),hd=e=>!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size),vd=(e,t)=>((e,t)=>pd(e,t).then((e=>t.utf8Encoder(e))))(e,t).then((e=>{if(e.length){const t=ud.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:(e,t)=>e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}),r="#text",n=Object.keys(t)[0],i=t[n];return i[r]&&(i[n]=i[r],delete i[r]),va(i)}return{}})),gd=(e,t)=>void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":"";var md={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},yd={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function Sd(e,t,r){return{applyToStack:function(n){n.add(function(e,t){return function(r,n){return function(i){return jr(void 0,void 0,void 0,(function(){var o,a,s,u,c;return Ir(this,(function(f){switch(f.label){case 0:return o=n.logger,a=n.outputFilterSensitiveLog,[4,r(i)];case 1:return s=f.sent().response,"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpResponse:s}),[4,t(s,e)];case 2:return(u=f.sent()).$metadata,c=_r(u,["$metadata"]),"function"==typeof(null==o?void 0:o.info)&&o.info({output:a(c)}),[2,{response:s,output:u}]}}))}))}}}(e,r),md),n.add(function(e,t){return function(r,n){return function(i){return jr(void 0,void 0,void 0,(function(){var o,a,s;return Ir(this,(function(u){switch(u.label){case 0:return o=n.logger,a=n.inputFilterSensitiveLog,"function"==typeof(null==o?void 0:o.info)&&o.info({input:a(i.input)}),[4,t(i.input,e)];case 1:return s=u.sent(),"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpRequest:s}),[2,r(Pr(Pr({},i),{request:s}))]}}))}))}}}(e,t),yd)}}}var wd={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},bd=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(r){return function(n){return jr(t,void 0,void 0,(function(){var t,i,o,a,s,u,c,f,l,d,p,h,v,g,m,y,S;return Ir(this,(function(w){switch(w.label){case 0:t=Pr({},n.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),o=Mr(i),a=o.next(),w.label=2;case 2:return a.done?[3,5]:(s=a.value,(u=t[s.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),f=e.base64Encoder(c),(l=new e.md5).update(c),d=[Pr({},t)],(S={})[s.target]=f,p=s.hash,v=(h=e).base64Encoder,[4,l.digest()]):[3,4]);case 3:t=Pr.apply(void 0,d.concat([(S[p]=v.apply(h,[w.sent()]),S)])),w.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return g=w.sent(),m={error:g},[3,8];case 7:try{a&&!a.done&&(y=o.return)&&y.call(o)}finally{if(m)throw m.error}return[7];case 8:return[2,r(Pr(Pr({},n),{input:t}))]}}))}))}}}(e),wd)}}};var Ed=Object.freeze({__proto__:null,PutObjectCommand:class extends pa{constructor(e){super(),this.input=e}resolveMiddleware(e,t,r){this.middlewareStack.use(Sd(t,this.serialize,this.deserialize)),this.middlewareStack.use(bd(t)),this.middlewareStack.use(no(t));const n=e.concat(this.middlewareStack),{logger:i}=t,o={logger:i,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Of.filterSensitiveLog,outputFilterSensitiveLog:kf.filterSensitiveLog},{requestHandler:a}=t;return n.resolve((e=>a.handle(e.request,r||{})),o)}serialize(e,t){return(async(e,t)=>{const r={"Content-Type":"application/octet-stream",...hd(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl},...hd(e.ContentEncoding)&&{"Content-Encoding":e.ContentEncoding},...hd(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...hd(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP},...hd(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5},...hd(e.CacheControl)&&{"Cache-Control":e.CacheControl},...hd(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation},...hd(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus},...hd(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP},...hd(e.ContentLength)&&{"Content-Length":e.ContentLength.toString()},...hd(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()},...hd(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...hd(e.ContentDisposition)&&{"Content-Disposition":e.ContentDisposition},...hd(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...hd(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext},...hd(e.Tagging)&&{"x-amz-tagging":e.Tagging},...hd(e.Expires)&&{Expires:Sa(e.Expires).toString()},...hd(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass},...hd(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner},...hd(e.ContentMD5)&&{"Content-MD5":e.ContentMD5},...hd(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption},...hd(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode},...hd(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId},...hd(e.ContentLanguage)&&{"Content-Language":e.ContentLanguage},...hd(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead},...hd(e.ACL)&&{"x-amz-acl":e.ACL},...hd(e.ContentType)&&{"Content-Type":e.ContentType},...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,r)=>(t["x-amz-meta-"+r]=e.Metadata[r],t)),{})};let n,i,o="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const t=e.Bucket;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");o=o.replace("{Bucket}",ha(t))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const t=e.Key;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");o=o.replace("{Key+}",t.split("/").map((e=>ha(e))).join("/"))}void 0!==e.Body&&(i=e.Body,n=i);const{hostname:a,protocol:s="https",port:u}=await t.endpoint();return new Vr({protocol:s,hostname:a,port:u,method:"PUT",headers:r,path:o,query:{"x-id":"PutObject"},body:n})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return fd(e,t);const r={$metadata:dd(e),ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0};return void 0!==e.headers["x-amz-server-side-encryption-context"]&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-expiration"]&&(r.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers.etag&&(r.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-version-id"]&&(r.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(r.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),await pd(e.body,t),Promise.resolve(r)})(e,t)}}});var xd=Object.freeze({__proto__:null,GetObjectCommand:class extends pa{constructor(e){super(),this.input=e}resolveMiddleware(e,t,r){this.middlewareStack.use(Sd(t,this.serialize,this.deserialize)),this.middlewareStack.use(bd(t)),this.middlewareStack.use(no(t));const n=e.concat(this.middlewareStack),{logger:i}=t,o={logger:i,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:ac.filterSensitiveLog,outputFilterSensitiveLog:oc.filterSensitiveLog},{requestHandler:a}=t;return n.resolve((e=>a.handle(e.request,r||{})),o)}serialize(e,t){return(async(e,t)=>{const r={"Content-Type":"",...hd(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...hd(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...hd(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5},...hd(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...hd(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner},...hd(e.IfUnmodifiedSince)&&{"If-Unmodified-Since":Sa(e.IfUnmodifiedSince).toString()},...hd(e.IfModifiedSince)&&{"If-Modified-Since":Sa(e.IfModifiedSince).toString()},...hd(e.IfNoneMatch)&&{"If-None-Match":e.IfNoneMatch},...hd(e.IfMatch)&&{"If-Match":e.IfMatch},...hd(e.Range)&&{Range:e.Range}};let n="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const t=e.Bucket;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",ha(t))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const t=e.Key;if(t.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",t.split("/").map((e=>ha(e))).join("/"))}const i={"x-id":"GetObject",...void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding},...void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl},...void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage},...void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition},...void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()},...void 0!==e.VersionId&&{versionId:e.VersionId},...void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()},...void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}},{hostname:o,protocol:a="https",port:s}=await t.endpoint();return new Vr({protocol:a,hostname:o,port:s,method:"GET",headers:r,path:n,query:i,body:void 0})})(e,t)}deserialize(e,t){return(async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return cd(e,t);const r={$metadata:dd(e),AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0};void 0!==e.headers["x-amz-object-lock-mode"]&&(r.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["content-language"]&&(r.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-disposition"]&&(r.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["cache-control"]&&(r.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-type"]&&(r.ContentType=e.headers["content-type"]),void 0!==e.headers["content-range"]&&(r.ContentRange=e.headers["content-range"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["content-length"]&&(r.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(r.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(r.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),void 0!==e.headers["x-amz-delete-marker"]&&(r.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-storage-class"]&&(r.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["content-encoding"]&&(r.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["x-amz-restore"]&&(r.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["x-amz-website-redirect-location"]&&(r.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(r.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["accept-ranges"]&&(r.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-version-id"]&&(r.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers.expires&&(r.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-expiration"]&&(r.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-missing-meta"]&&(r.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-replication-status"]&&(r.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-tagging-count"]&&(r.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["last-modified"]&&(r.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers.etag&&(r.ETag=e.headers.etag),void 0!==e.headers["x-amz-request-charged"]&&(r.RequestCharged=e.headers["x-amz-request-charged"]),Object.keys(e.headers).forEach((t=>{void 0===r.Metadata&&(r.Metadata={}),t.startsWith("x-amz-meta-")&&(r.Metadata[t.substring(11)]=e.headers[t])}));const n=e.body;return r.Body=n,Promise.resolve(r)})(e,t)}}});const{PassThrough:Ad}=b.default;const{constants:Cd}=A.default,{promisify:Ld}=C.default,Td=Ld(b.default.pipeline);class kd extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function Od(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:r}=t,n=(e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n="buffer"===r;let i=!1;t?i=!(r||n):r=r||"utf8",n&&(r=null);const o=new Ad({objectMode:i});r&&o.setEncoding(r);let a=0;const s=[];return o.on("data",(e=>{s.push(e),i?a=s.length:a+=e.length})),o.getBufferedValue=()=>t?s:n?Buffer.concat(s,a):s.join(""),o.getBufferedLength=()=>a,o})(t);return await new Promise(((t,i)=>{const o=e=>{e&&n.getBufferedLength()<=Cd.MAX_LENGTH&&(e.bufferedData=n.getBufferedValue()),i(e)};(async()=>{try{await Td(e,n),t()}catch(e){o(e)}})(),n.on("data",(()=>{n.getBufferedLength()>r&&o(new kd)}))})),n.getBufferedValue()}var Rd=Od,Nd=(e,t)=>Od(e,{...t,encoding:"buffer"}),Pd=(e,t)=>Od(e,{...t,array:!0}),_d=kd;Rd.buffer=Nd,Rd.array=Pd,Rd.MaxBufferError=_d;var jd=Object.freeze(Object.assign(Object.create(null),Rd,{default:Rd,buffer:Nd,array:Pd,MaxBufferError:_d}));exports.handler=async e=>{const t=S.default;let r;const n=y.default,i=w.default,{now:o,log:a}=yr(t.logLambdaExecutionTimes),s=o();if(r=Tr(e)?await Lr({event:e,manifest:t,prerenderManifest:n}):await Cr({event:e,manifest:t,prerenderManifest:n,routesManifest:i}),r.hasOwnProperty("status")){!function(e,t,r){if(t.headers)for(const n of r.headers)if(pr(e,n.source))for(const e of n.headers)if(e.key&&e.value){const r=e.key.toLowerCase();t.headers[r]=[{key:r,value:e.value}]}}(e.Records[0].cf.request.uri,r,i)}return a("handler execution time",s,o()),r};
